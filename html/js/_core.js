"use strict";function _typeof2(e){return(_typeof2="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(e){return void 0===e?"undefined":_typeof2(e)}):function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)}))(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)})(e)}!function(a){for(var s=0,e=["ms","moz","webkit","o"],t=0;t<e.length&&!a.requestAnimationFrame;++t)a.requestAnimationFrame=a[e[t]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[e[t]+"CancelAnimationFrame"]||a[e[t]+"CancelRequestAnimationFrame"];if(a.requestAnimationFrame||(a.requestAnimationFrame=function(e,t){var i=(new Date).getTime(),n=Math.max(0,16-(i-s)),o=a.setTimeout(function(){e(i+n)},n);return s=i+n,o}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(e){clearTimeout(e)}),Array.prototype.includes||(Array.prototype.includes=function(e){var t=Object(this),i=parseInt(t.length,10)||0;if(0===i)return!1;var n,o=parseInt(arguments[1],10)||0;for(0<=o?n=o:(n=i+o)<0&&(n=0);n<i;){var a=t[n];if(e===a||e!=e&&a!=a)return!0;n++}return!1}),Object.values||Object.defineProperty(Object,"values",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return"string"==typeof t?t.split(""):Array.isArray(t)?t:"object"!==_typeof(t)?[]:Object.keys(t).map(function(e){return t[e]})}}),"function"!=typeof a.CustomEvent){var i=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i};i.prototype=a.Event.prototype,a.CustomEvent=i}a.svg4everybody=function(){function p(e,t){if(t){var i=document.createDocumentFragment(),n=t.getAttribute("viewBox");e.setAttribute("viewBox",n);for(var o=t.cloneNode(!0);o.childNodes.length;)i.appendChild(o.firstChild);e.appendChild(i)}}function m(n){n.onreadystatechange=function(){if(4===n.readyState){var i=n._cachedDocument;i||((i=n._cachedDocument=document.implementation.createHTMLDocument("")).body.innerHTML=n.responseText,n._cachedTarget={}),n._embeds.splice(0).map(function(e){var t=n._cachedTarget[e.id];t||(t=n._cachedTarget[e.id]=i.getElementById(e.id)),p(e.svg,t)})}},n.onreadystatechange()}return function(e){var c,d=Object(e);c="polyfill"in d?d.polyfill:/\bTrident\/[5-7]\b|\bMSIE (?:9|10)\.0\b/.test(navigator.userAgent)||/\bEdge\/(\d+)\.(\d+)\b/.test(navigator.userAgent)||(navigator.userAgent.match(/\bAp{2}leWebKit\/(\d+)\b/)||[])[1]<537;var f={},u=a.requestAnimationFrame||setTimeout,h=document.getElementsByTagName("use");c&&function e(){for(var t=0;t<h.length;){var i=h[t],n=i.parentNode;if(n&&/svg/i.test(n.nodeName)){var o=i.getAttribute("xlink:href");if(c&&(!d.validate||d.validate(o,n,i))){n.removeChild(i);var a=o.split("#"),s=a.shift(),r=a.join("#");if(s.length){var l=f[s];l||((l=f[s]=new XMLHttpRequest).open("GET",s),l.send(),l._embeds=[]),l._embeds.push({svg:n,id:r}),m(l)}else p(n,document.getElementById(r))}}else++t}u(e,67)}()}}()}(window),function(e){function t(e){e.preventDefault()}e.videoImgFallback=function(e){console.warn("video load error, gif fallback used");var t=e.querySelector("img");t&&e.parentNode.replaceChild(t,e)},e.getCookie=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([$()*+./?[\\\]^{|}])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},e.setCookie=function(e,t,i){void 0===i&&(i={});var n=i.expires;if("number"==typeof n&&n){var o=new Date;o.setTime(o.getTime()+1e3*n),n=i.expires=o}n&&n.toUTCString&&(i.expires=n.toUTCString());var a=e+"="+(t=encodeURIComponent(t));for(var s in i){a+="; "+s;var r=i[s];!0!==r&&(a+="="+r)}document.cookie=a},e.deleteCookie=function(e){setCookie(e,"",{expires:-1})},e.getJsonFromUrl=function(e){var t;if(e){var i=location.href.indexOf("?");if(-1===i)return[];t=location.href.substr(i+1)}else t=location.search.substr(1);var r={};return t.split("&").forEach(function(e){if(e){var t=(e=e.split("+").join(" ")).indexOf("="),i=-1<t?e.substr(0,t):e,n=-1<t?decodeURIComponent(e.substr(t+1)):"",o=i.indexOf("[");if(-1===o)r[decodeURIComponent(i)]=n;else{var a=i.indexOf("]",o),s=decodeURIComponent(i.substring(o+1,a));i=decodeURIComponent(i.substring(0,o)),r[i]||(r[i]=[]),s?r[i][s]=n:r[i].push(n)}}}),r},e.chunkSplit=function(e,t,i){return void 0===t&&(t=3),void 0===i&&(i=" "),(e+="").split("").reverse().join("").match(new RegExp(".{0,"+t+"}","g")).join(i).split("").reverse().join("").trim()},e.preventBodyScrolling=function(e){void 0===e&&(e=!1),document.body[!0===e?"addEventListener":"removeEventListener"]("touchmove",t,!1)}}(window),void 0===window.flexbe_cli&&(window.flexbe_cli={}),window.spaced_cli=window.flexbe_cli,flexbe_cli._init=function(){function i(){if(!flexbe_cli.isInited)if("undefined"!=typeof jQuery){flexbe_cli.init(),flexbe_cli.isInited=!0;var e=["ready"];e.push(flexbe_cli.run.is_touch?"is-touch":"is-pointer"),e.push(flexbe_cli.is_admin?"is-editor":"is-view");try{var t;(t=document.body.classList).add.apply(t,e)}catch(t){document.body.className+=" "+e.join(" ")}flexbe_cli.run.is_screenshoter||(window.onpopstate=function(){flexbe_cli.modal.popstate()}),svg4everybody({polyfill:!flexbe_cli.is_admin&&(flexbe_cli.run.is_ie||flexbe_cli.run.is_EDGE)})}else setTimeout(i,10)}["complete","loaded"].includes(document.readyState)?i():document.addEventListener("DOMContentLoaded",function(){i()}),window.addEventListener("load",function(){i(),flexbe_cli.isLoaded=!0})},flexbe_cli.events={init:function(){$.observable=function(t){var i={_JQInit:function(){this._JQ=$(this)},emit:function(e,t){return!this._JQ&&this._JQInit(),this._JQ.trigger(e,t),this},once:function(e,t){return!this._JQ&&this._JQInit(),this._JQ.one(e,t),this},on:function(e,t){return!this._JQ&&this._JQInit(),this._JQ.bind(e,t),this},off:function(e,t){return!this._JQ&&this._JQInit(),this._JQ.unbind(e,t),this}};return"object"!==_typeof(t)&&(t=this),Object.keys(i).forEach(function(e){t[e]=i[e].bind(t)}),i},$.observable(this)}},flexbe_cli.run={init:function(){this.deviceInfo()},deviceInfo:function(){var e=navigator.userAgent.toLowerCase();this.is_screen_tablet=768<=window.innerWidth&&window.innerWidth<=1024,this.is_screen_tablet_s=570<=window.innerWidth&&window.innerWidth<768,this.is_screen_mobile=window.innerWidth<570,this.is_screen_mobile_s=window.innerWidth<350,this.is_screen_all_mobile=this.is_screen_tablet_s||this.is_screen_mobile,this.is_screen_small_pc=1024<window.innerWidth&&window.innerWidth<1200,this.is_screen_pc=1200<=window.innerWidth,this.is_touch="ontouchstart"in window,this.is_pointer=!this.is_touch,this.is_bot=/bot|aolbuild|bingpreview|msnbot|baidu|duckduckgo|mediapartners-google|teoma|slurp/gi.test(e),this.is_mobile=-1!==e.indexOf("mobile")||this.is_screen_mobile||this.is_screen_tablet_s,this.is_desktop=!this.is_mobile,this.is_webkit=-1!==e.indexOf("webkit"),this.is_safari=-1!==e.indexOf("safari")&&e.match(/version\/(\d+)/),this.is_firefox=-1!==e.indexOf("firefox"),this.is_mobile_ie=-1!==e.indexOf("iemobile"),this.is_ie=-1!==e.indexOf("trident")||-1!==e.indexOf("msie"),this.is_EDGE=-1!==e.indexOf("edge"),this.is_OSX=/iPad|iPhone|iPod|Macintosh/gi.test(e),this.is_android=-1!==e.indexOf("android"),this.is_ios=this.is_touch&&this.is_mobile&&this.is_OSX,this.is_screenshoter=-1<e.indexOf("slimerjs")||-1<e.indexOf("phantomjs"),this.is_screen_mobile?this.device_type="mobile":this.is_screen_tablet_s||this.is_screen_tablet?this.device_type="tablet":this.device_type="desktop"}},flexbe_cli.lib={init:function(){$(document).on("click.beforeLoadedLg","[data-lg]",function(e){e.preventDefault()}),this.lg.init()},lg:{init:function(){var i=this;if(!flexbe_cli.is_admin&&99!=flexbe_cli.theme_id){var n=".lg-container";$(n).filter(function(e,t){return!$(t).parents(n).length}).on("mouseover.initLightGallery",function(e){var t=$(e.currentTarget);t.off(".initLightGallery"),i.wrap(t)}),$(window).one("load.flexbe_lg",function(){i.required||i.require()})}},require:function(e){$("[data-lg]").length&&flexbe_cli.require(["/js/lg-spaced-bundle.min.js"],e),this.required=!0},wrap:function(e){var t=!1,i="1"===e.find(".component-slider").attr("data-loop"),n=!e.attr("data-lg-single");function o(){history.state&&history.state.lg&&history.replaceState(null,null,"#")}this.require(function(){e.lightGallery({selector:"[data-lg]:not(.swiper-slide-duplicate [data-lg])",counter:!0,download:!1,slideEndAnimation:!1,getCaptionFromTitleOrAlt:!0,closable:!0,loop:i,easing:"ease-out",hideBarsDelay:6e3,zoomIcons:!1,actualSize:!1,enableSlide:n}),e.on("onBeforeOpen.lg",function(){t=!0,o(),history.state&&history.state.lg||history.pushState({lg:!0},null,"#image")}),e.on("onBeforeClose.lg",function(){history.state&&history.state.lg&&(t=!1,history.back()),o()}),$(document).off("click.beforeLoadedLg"),o(),window.addEventListener("popstate",function(){!t||history.state&&history.state.lg||e.each(function(e,t){var i=$(t).data("lightGallery");i&&i.destroy()})})})}}},function(){var f=[];flexbe_cli.require=function(i,n,t,e){if(void 0===i&&(i=""),void 0===n&&(n=function(){}),void 0===t&&(t=15e3),void 0===e&&(e=!1),i&&0!==i.length||n(!1),!e){"string"==typeof i&&(i=[i]);var o=0,a=function(e){var t=i.every(function(e){return"boolean"==typeof f[e]});o+=1,t&&o===i.length&&n(e)};return Array.isArray(i)&&i.forEach(function(e){flexbe_cli.require(e,a,t,!0)}),!1}if(!0===f[i])n(!0);else if(Array.isArray(f[i]))f[i].push(n);else{var s,r=!1,l=function(t){if(void 0===t&&(t=!0),!r){r=!0,clearTimeout(s);var e=f[i];f[i]=t,e.forEach(function(e){"function"==typeof e&&e(t)})}};if(f[i]=[n],/\.css$/.test(i)){var c=document.createElement("link");c.onerror=l.bind(this,!1),c.onload=l.bind(this,!0),s=setTimeout(l.bind(this,"timeout"),t),c.rel="stylesheet",c.href=i,document.body.appendChild(c)}else{var d=document.createElement("script");d.onload=l.bind(this,!0),d.onerror=l.bind(this,!1),s=setTimeout(l.bind(this,"timeout"),t),d.async=!0,d.src=i,document.body.appendChild(d)}}}}(),flexbe_cli.lang=_extends({current:"ru",currency:"₽",country:"RUS",locale:{},init:function(e){var a=this;void 0===e&&(e="body"),$("[data-lang]",e).each(function(e,t){var i=$(t).attr("data-lang"),n=$(t).attr("data-lang-content"),o=String(a.get(i));$(t).html(o.replace(/%s/,n))})},get:function(e){if(e)return"currency"===e?this.currency:String(e).split(".").reduce(function(e,t){return e&&e[t]},this.locale)||""}},flexbe_cli.lang),flexbe_cli.resize={width:window.innerWidth,height:window.innerHeight,oldWidth:window.innerWidth,oldHeight:window.innerHeight,init:function(){this.simulateWindowResized(),this.simulateDocumentResize()},simulateWindowResized:function(){var e,t=this,i=this.oldWidth,n=this.oldHeight;$(window).on("resize orientationchange",function(){t.width=window.innerWidth,t.height=window.innerHeight,clearTimeout(e),e=setTimeout(function(){t.oldWidth=i,t.oldHeight=n,i=t.width,n=t.height,flexbe_cli.run.deviceInfo(),$(window).trigger("resized")},80)})},simulateDocumentResize:function(){var t=this;this.documentHeight=document.body.scrollHeight;var e=flexbe_cli.is_admin?500:150;setInterval(function(){!function(){if(!flexbe_cli.scroll.inScroll){var e=document.body.scrollHeight;3<Math.abs(e-t.documentHeight)&&(t.documentHeight=e,$(window).trigger("documentresize"))}}()},e)}},flexbe_cli.scroll={inScroll:!1,latest:window.pageYOffset,init:function(){var e=this;this.latest=window.pageYOffset,document.addEventListener("scroll",function(){e.latest=window.pageYOffset,e.inScroll=!0},{passive:!0}),document.addEventListener("scrollend",function(){e.inScroll=!1},{passive:!0}),this.scrollImprovement.init()},scrollImprovement:{scrollTimer:0,pointerState:!1,init:function(){this.createStopScrollEvent(),this.pointerEvents()},createStopScrollEvent:function(){var t=this,i=flexbe_cli.scroll.latest;document.addEventListener("scroll",function(){var e=i>flexbe_cli.scroll.latest?"up":"down";clearTimeout(t.scrollTimer),t.scrollTimer=setTimeout(function(){i=flexbe_cli.scroll.latest,document.dispatchEvent(new CustomEvent("scrollend",{detail:{direction:e}}))},200)},{passive:!0})},pointerEvents:function(){var e=this;flexbe_cli.is_admin||(document.addEventListener("scroll",function(){e.pointerState||(e.pointerState=!0,document.body.classList.add("disable-pointer-events"))},{passive:!0}),document.addEventListener("scrollend",function(){e.pointerState&&(e.pointerState=!1,document.body.classList.remove("disable-pointer-events"))}))}}},flexbe_cli.stat={u_id:0,time:0,goals:{quiz:"quiz_start",modal:"modal_open",modal_form:"form_open",modal_product:"product_show",modal_done:"order_done",cart:"add_to_cart",link:"link_open",file:"file_load",close:"modal_close"},init:function(){var e=getCookie("user_id");if(flexbe_cli.is_admin||flexbe_cli.run.is_bot||flexbe_cli.run.is_screenshoter||!flexbe_cli.p_id||e)return!1;var t=getCookie("f_uid");t?(this.u_id=t,this.user_visit()):this.user_create(),this.AB.init(),this.ecommerce.init()},getGoal:function(e,t){return"modal"===e&&(/form/.test(t)&&(e="modal_form"),/done/.test(t)?e="modal_done":/product/.test(t)&&(e="modal_product")),this.goals[e]||!1},reach_goal:function(e,t){if(t=void 0!==t?t:{},!flexbe_cli.is_admin)try{if(flexbe_cli.yandex_id)var i=setInterval(function(){if("undefined"==typeof Ya||"object"!==_typeof(Ya._metrika.counter))return!1;clearInterval(i),Ya._metrika.counter.reachGoal(e,t)},50);"function"==typeof ga&&ga("send","event",e,"send")}catch(e){}},ecommerce:{currencyCodes:{"€":{code:"EUR",name:"Евро"},Br:{code:"BYR",name:"Белорусский Рубль"},"₴":{code:"UAH",name:"Гривна"},"грн.":{code:"UAH",name:"Гривна"},"₸":{code:"KZT",name:"Тенге"},"тңг":{code:"KZT",name:"Тенге"}},currencyCode:"RUB",initialized:!1,init:function(){flexbe_cli.lang.currency&&this.currencyCodes[flexbe_cli.lang.currency]&&(this.currencyCode=this.currencyCodes[flexbe_cli.lang.currency].code),this.initialized=!0,window.dataLayer||(window.dataLayer=[])},add:function(e,t,i,n){this.initialized&&window.dataLayer.push({ecommerce:{currencyCode:this.currencyCode,add:{products:[{id:e,name:t,price:n,quantity:i}]}}})},remove:function(e,t){this.initialized&&window.dataLayer.push({ecommerce:{currencyCode:this.currencyCode,remove:{products:[{id:e,name:t}]}}})},purchase:function(e,t){if(void 0===t&&(t=!1),this.initialized&&(e||0!=e.length)){t||(t=Math.ceil(1e4*Math.random()));try{window.dataLayer.push({ecommerce:{currencyCode:this.currencyCode,purchase:{actionField:{id:t},products:e.map(function(e){return{id:e.id,name:e.title,price:e.price,quantity:e.count}})}}})}catch(e){}}}},get_utm:function(){var e=function(e){if(""===e)return{};for(var t={},i=0;i<e.length;++i){var n=e[i].split("=");2==n.length&&(t[n[0]]=decodeURIComponent(n[1].replace(/\+/g," ")))}return t}(window.location.search.substr(1).split("&")),i={};return $.each(e,function(e,t){"utm_"===e.substring(0,4)&&(i[e]=t)}),document.referrer&&(i.url=document.referrer),i},user_create:function(){var t=this;$.ajax({url:"/mod/stat/",type:"POST",dataType:"json",data:{s_id:flexbe_cli.s_id,group_id:flexbe_cli.group_id,p_id:flexbe_cli.p_id,utm_data:this.get_utm(),device:{type:flexbe_cli.run.device_type,width:window.innerWidth,browser:navigator.userAgent}}}).done(function(e){"object"==_typeof(e)&&null!==e&&e.u_id?(setCookie("f_uid",e.u_id,{Path:"/"}),t.u_id=e.u_id):console.warn("cookie не установлена",e)})},user_visit:function(){$.ajax({url:"/mod/stat/visit/",type:"POST",dataType:"json",data:{s_id:flexbe_cli.s_id,group_id:flexbe_cli.group_id,p_id:flexbe_cli.p_id,u_id:this.u_id}}).done($.proxy(function(e){e.v_id||console.warn("cookie визита не установлена",e)},this))},AB:{init:function(){var n=this;flexbe_cli.events.off("entity_event.abstat").on("entity_event.abstat",function(e,t){if(t&&"screen"===t.type&&t.state&&t.core&&"block"===t.core.is){var i=t.core.$area;n.fixview(i.attr("data-abtest-id"),i.attr("data-abtest-variant"))}})},setcookie:function(e){setCookie("f_ab",JSON.stringify(e),{expires:604800,path:"/",domain:document.location.hostname})},getcookie:function(){var e=!0,t=getCookie("f_ab");if(t)try{t=JSON.parse(decodeURIComponent(t)),e=!1}catch(t){console.warn("cant parse abtest cookie",t),e=!0}return e&&(t={view:{},lead:[]}),t},proccess:{},fixview:function(i,n){if(void 0===i||void 0===n||"a"!=n&&"b"!=n)return!1;void 0!==this.getcookie().view[i]||this.proccess[i]||(this.proccess[i]=!0,$.ajax({url:"/mod/stat/abtest",type:"POST",dataType:"json",data:{test_id:i,variant:n,s_id:flexbe_cli.s_id,p_id:flexbe_cli.p_id}}).done($.proxy(function(e){if(this.proccess[i]=!1,1==e.status){var t=flexbe_cli.stat.AB.getcookie();t.view[i]=n,flexbe_cli.stat.AB.setcookie(t)}},this)))},fixlead:function(e){if(flexbe_cli.bill&&1!=flexbe_cli.bill.abtest)return!1;if(0<e.length){var t=this.getcookie(),i=$.merge(t.lead,e);t.lead=$.grep(i,function(e,t){return $.inArray(e,i)===t}),this.setcookie(t)}}}};var EntityCore=function(){function e(e,i){var n=this;void 0===i&&(i={});var t=$(e),o=t.attr("data-is"),a=t.attr("data-id"),s=t.attr("data-mod-id")||0,r="zone"===o?"e":o[0],l=t.attr("data-"+r+"-id"),c=t.data(r+"Type")||[],d=t.data("components")||!0;this.require=[],this.$area=t,this.area=t[0],this.$root=t,this.root=t[0],this.is=o,this.id=a,this.template_id=l,this.mod_id=s,this.type=c,this.components=d,this.tween={},this.isVisible=!1,this.isBeside=!1,this.isView=!1,this.isFocused=!1,Object.keys(i).forEach(function(e){var t=i[e];"object"===_typeof(t)?n[e]=$.extend(!0,Array.isArray(t)?[]:{},t):n[e]=t})}var t=e.prototype;return t.onInit=function(){},t.onUpdate=function(){},t.onLoad=function(){},t.onReady=function(){},t.onBeside=function(){},t.onFocus=function(){},t.onScreen=function(){},t.onView=function(){},t.onMsg=function(){},t.onResize=function(){},t.getNested=function(){if(4!==flexbe_cli.theme_id)return[];if(this._nestedElementsCache)return this._nestedElementsCache;var e=$(".content-zone, .element-item",this.area).toArray().map(function(e){return flexbe_cli.element.bind(e).core||!1}).filter(function(e){return e});return flexbe_cli.is_admin||(this._nestedElementsCache=e),e},t.init=function(e){var t=this,i=this.inited?"update":"init";"init"===i?this._onInit(e):"update"===i&&this._onUpdate(e),("init"===i||e.templateRendered)&&flexbe_cli.require(this.require,function(){t._onLoad(e)})},t._onInit=function(e){this.inited=!0,this._tween(),this.onInit(e),flexbe_cli.events.emit("entity_event",{type:"inited",core:this,params:e})},t._onLoad=function(e){this.loaded=!0,this.onLoad(e),this.onReady(e),this._tween({force:!0})},t._onUpdate=function(e){this.updated=!0,(e.templateRendered||e.styleRendered)&&this._tween(),this.onUpdate(e),flexbe_cli.events.emit("entity_event",{type:"updated",core:this,params:e})},t._onResize=function(e){this._tween()&&(this.onResize(e),flexbe_cli.events.emit("entity_event",{type:"resize",core:this,params:e}),this.$area.trigger("onResize",{}))},t._onMsg=function(e,t){this.onMsg(e,t)},t._onFocus=function(e){var t=e.state;this.isFocused!==t&&(this.isFocused=t,this.onFocus(t),flexbe_cli.events.emit("entity_event",{type:"focus",core:this,state:t}),this.$area.trigger("onFocus",{state:t}))},t._onScreen=function(e){var t=e.state;this.isVisible!==t&&(this.isVisible=t,this.onScreen(t),flexbe_cli.events.emit("entity_event",{type:"screen",core:this,state:t}),this.$area.trigger("onScreen",{state:t}))},t._onView=function(e){var t=e.state;this.isView!==t&&(this.isView=t,this.onView(t),flexbe_cli.events.emit("entity_event",{type:"view",core:this,state:t}),this.$area.trigger("onView",{state:t}))},t._onBeside=function(e){var t=e.state;this.isBeside!==t&&(this.isBeside=t,this.onBeside(t),flexbe_cli.events.emit("entity_event",{type:"beside",core:this,state:t}),this.$area.trigger("onBeside",{state:t}))},t._tween=function(){var e=this.area.offsetWidth,t=this.area.offsetHeight,i=e!==this.tween.width||t!==this.tween.height;return this.tween.width=e,this.tween.height=t,i},e}();function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}var BlockCore=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).is="block",i.$block=i.$area,i}_inheritsLoose(e,n);var t=e.prototype;return t._onInit=function(e){flexbe_cli.block.fixCoverHeight(this.$area),n.prototype._onInit.call(this,e)},t._onUpdate=function(e){e.templateRendered&&flexbe_cli.block.fixCoverHeight(this.$area),n.prototype._onUpdate.call(this,e)},t._tween=function(e){var t=(void 0===e?{}:e).force,i=void 0!==t&&t,c=this,n=this.area.offsetWidth,d=this.area.offsetHeight,o=this.area.offsetTop,a=n!==this.tween.width||d!==this.tween.height;this.tween.width=n,this.tween.height=d,this.tween.start=o,this.tween.end=o+d,i&&(this.isVisible=null,this.isBeside=null,this.isView=null,this.isFocused=null);var s=this.$area.find(".container")[0];return this.tween.color=s&&getComputedStyle(s).color||"#fff",r(),$(window).off("scroll.tween_"+this.id).on("scroll.tween_"+this.id,$.throttle(r,50)),a;function r(){if(!c.inited)return!1;var e,t=Math.max(flexbe_cli.resize.height-d,0),i=1/c.tween.height*(window.pageYOffset-c.tween.start),n=(window.pageYOffset+flexbe_cli.resize.height/2-(c.tween.start+c.tween.height/2)+c.tween.height/2)/c.tween.height,o=(e=c.tween.start-flexbe_cli.resize.height,1/(c.tween.end-e)*(window.pageYOffset-e));c.tween.fix=t,c.tween.position=i,c.tween.positionAbs=o;var a=0<(c.tween.positionCenter=n)&&n<1,s=function(){if(!c.tween.width)return!1;var e=flexbe_cli.resize.height>=c.tween.height?c.tween.height/4:flexbe_cli.resize.height/3;return window.pageYOffset+flexbe_cli.resize.height>c.tween.start+e&&window.pageYOffset<c.tween.end-e}(),r=!!c.tween.width&&0<=c.tween.positionAbs&&c.tween.positionAbs<=1,l=!!c.tween.width&&-.2<=c.tween.positionAbs&&c.tween.positionAbs<=1.2;c.tween.focus=a,c.tween.view=s,c.tween.onscreen=r,c.tween.beside=l,c._onBeside({state:l}),c._onScreen({state:r}),c._onView({state:s}),c._onFocus({state:a})}},e}(EntityCore);function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}var ModalCore=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).is="modal",i.isOpen=!1,i.$modal=i.$area,i.$list=flexbe_cli.modal.$list,i}_inheritsLoose(e,n);var t=e.prototype;return t.open=function(e,t){var i=this;void 0===t&&(t={}),this.isOpen=!0,flexbe_cli.block.pushOverlay("modal",!0),this.lastOptions=t,this.lastScroll=flexbe_cli.scroll.latest;var n=this.$area.find(".modal-data > ._anchor").attr("name")||this.id;flexbe_cli.lockPopstate=!0,location.hash="#"+n,flexbe_cli.lockPopstate=!1,this.$list.addClass("show"),this.$area.addClass("show"),setTimeout(function(){i.$list.addClass("overlay"),i._onOpen(e),i._onScreen({state:!0}),i._onBeside({state:!0}),i._onView({state:!0}),i._onFocus({state:!0}),"function"==typeof t.onOpen&&t.onOpen(i)},30),$("body").addClass("is-modal-open"),flexbe_cli.run.is_desktop?$("body").addClass("overflow"):flexbe_cli.run.is_screen_all_mobile&&$("body, html").scrollTop(0)},t.close=function(e){var t=(void 0===e?{}:e).from,i=this.lastOptions;this.lastOptions={},this.isOpen=!1,flexbe_cli.block.removeOverlay("modal"),/^#{1,2}/.test(location.hash)&&(flexbe_cli.lockPopstate=!0,location.hash="##",flexbe_cli.lockPopstate=!1),this.$area.removeClass("show"),t||($("body").removeClass("overflow"),this.$list.removeClass("show overlay")),this._onClose(),this._onScreen({state:!1}),this._onBeside({state:!1}),this._onView({state:!1}),this._onFocus({state:!1}),"function"==typeof i.onClose&&i.onClose(this),$("body").removeClass("is-modal-open"),flexbe_cli.run.is_screen_all_mobile&&$("body, html").scrollTop(this.lastScroll)},t._onOpen=function(e){this._tween(),this.onOpen(e),flexbe_cli.events.emit("entity_event",{type:"opened",core:this,data:e})},t._onClose=function(){this.onClose(),flexbe_cli.events.emit("entity_event",{type:"closed",core:this})},t.onOpen=function(){},t.onClose=function(){},e}(EntityCore);function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}var WidgetCore=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).is="widget",i.$widget=i.$area,i}return _inheritsLoose(e,n),e.prototype._tween=function(){},e}(EntityCore);flexbe_cli.components={instances:{},classes:{},helpers:{},init:function(){var n=this,o=this.instances;this.links(),flexbe_cli.lang.init(),flexbe_cli.events.on("entity_event.components_init",function(e,t){if(!(t&&t.type&&t.core&&t.core.id))return!1;var i=o[t.core.id]||[];"inited"===t.type||"updated"===t.type&&t.params.templateRendered?(n.initComponents({core:t.core,reason:t.type,params:t.params}),flexbe_cli.lang.init(t.core.area)):/resize/.test(t.type)?i.forEach(function(e){return e._onResize({core:t.core,reason:t.type,params:t.params})}):/screen/.test(t.type)?i.forEach(function(e){return e._onView({state:t.state})}):/focus/.test(t.type)?i.forEach(function(e){return e._onFocus({state:t.state})}):/beside/.test(t.type)?i.forEach(function(e){return e._onBeside({state:t.state})}):/open/.test(t.type)&&"modal"===t.core.is?i.forEach(function(e){e._onOpen({data:t.data})}):/close/.test(t.type)&&"modal"===t.core.is&&i.forEach(function(e){e._onClose({data:t.data})})}),$(window).off("load.core_components").one("load.core_components",function(){Object.values(o).forEach(function(e){e.forEach(function(e){return e._onPageLoad()})})})},initComponents:function(e){var l=this,t=void 0===e?{}:e,c=t.core,i=t.reason,d=void 0===i?"inited":i,n=t.force,f=void 0!==n&&n,o=c.id,a=c.$area,s=c.components,r=!1;if(!0===s?r="[data-component]":Array.isArray(s)&&(r=s.map(function(e){return'[data-component^="'+e+'"]'}).join(", ")),r){var u=a.find(r).toArray(),h={};this.instances[o]=u.map(function(e){var t=[],i=String(e.getAttribute("data-component")).trim().split(":"),n=i[0],o=i[1];o&&(t=String(o).replace(/^\[|\]$/g,"").split(",")),void 0===h[n]&&(h[n]=0);var a=h[n];if(h[n]+=1,e.componentInstance&&!f)return e.componentInstance.index=a,e.componentInstance;var s=l.classes[n];if("function"==typeof s){var r=new s({args:t,component:e,index:a,core:c,reason:d});if(r instanceof BaseComponent)return(e.componentInstance=r)._onInit(),c.isVisible&&r._onView({state:!0}),r}return!1}).filter(function(e){return e})}if(this.instances[o]&&!this.instances[o].length)return delete this.instances[o],!1},links:function(e){void 0===e&&(e="body"),$(e).off("click.component-links").on("click.component-links","a[href], a[data-action]",function(e){var t=$(e.currentTarget).attr("href"),i=$(e.currentTarget).attr("data-action");if(t||i){if(/#{1,2}.+/.test(t)){1===flexbe_cli.theme_id?$(e.currentTarget).closest(".mobile-menu").removeClass("active"):($("body > .mobile-menu").trigger("close"),$("body").removeClass("overflow fixed"));var n=(t=t.replace(/^(?:\.\/)#{2}/,"#").trim()).trim().split("#"),o=""===n[0]||"./"===n[0]?location.pathname:n[0],a=n[n.length-1];if(o!==location.pathname)return!0;var s=flexbe_cli.block.$list.find(".b_"+a+', ._anchor[name="'+a+'"]').eq(0),r=flexbe_cli.modal.$list.find(".m_"+a+', ._anchor[name="'+a+'"]').eq(0);if(flexbe_cli.events.emit("mobilemenu_command",{command:"close"}),s.length){var l=s.closest(".b_block");flexbe_cli.events.emit("modal_command",{command:"close"}),flexbe_cli.block.scrollTo(l),window.location.hash="#"+a}else if(r.length){if(flexbe_cli.is_admin)return!0;var c=r.closest(".m_modal").data("id");flexbe_cli.events.emit("modal_command",{command:"open",id:c,data:{}})}e.preventDefault(),e.stopPropagation()}else if("button"===i){var d=$(e.currentTarget).closest("[data-item-id]").find(".component-button");d[0]&&d[0].click()}return t&&flexbe_cli.is_admin&&(e.preventDefault(),e.stopPropagation()),!0}})}};var BaseComponent=function(){function e(e){var t=this,i=e.component,n=e.index,o=e.core,a=e.reason;this.core=o,this.owner=o.area,this.root=o.root,this.index=n||0,this.component=i,this.$component=$(i),this.require=[],this.isPageLoaded=flexbe_cli.isLoaded||!1,this.isUpdated="updated"===a,this.isLoaded=!1,this.isInited=!1,this.isViewed=!1,this.isBesided=!1,this.inView=!1,this.inBeside=!1,Object.defineProperty(this,"isVisible",{get:function(){return t.$component.is(":visible")},enumerable:!0,configurable:!0})}var t=e.prototype;return t.onInit=function(){},t.onLoad=function(){},t.onView=function(){},t.onBeside=function(){},t.onPageLoad=function(){},t.onResize=function(){},t.onFocus=function(){},t.onOpen=function(){},t.onClose=function(){},t._onInit=function(){var e=this;"function"==typeof this.onInit&&this.onInit(),flexbe_cli.require(this.require,function(){e._onLoad()}),this.isInited=!0},t._onLoad=function(){"function"==typeof this.onLoad&&this.onLoad(),this.isLoaded=!0},t._onView=function(e){var t=e.state;this.inView=t,this.onView({state:t,isFirst:t&&!this.isViewed}),t&&(this.isViewed=!0)},t._onFocus=function(e){var t=e.state;this.inFocus=t,this.onFocus({state:t,isFirst:t&&!this.isFocused}),t&&(this.isFocused=!0)},t._onResize=function(e){this.onResize(e)},t._onOpen=function(e){this.onOpen(e)},t._onClose=function(e){this.onClose(e)},t._onBeside=function(e){var t=e.state;this.inBeside=t,this.onBeside({state:t,isFirst:t&&!this.isBesided}),t&&(this.isBesided=!0)},t._onPageLoad=function(){this.onPageLoad(),this.isPageLoaded=!0},e}();function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)})(e)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)})(e)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)})(e)}!function(){var o=function(){function e(e,t,i){var n=this;this.id=e,this.params=i,this.pending=!1,this.visible=!1,this.size=!1,this.imSize={w:0,h:0},this.$outer=$(".parallax-outer",t),this.overlay=$(".overlay",t).get(0),this.canvas=$("canvas",this.$outer).get(0),this.offScreen=document.createElement("canvas"),this.ovOp=+$(this.overlay).css("opacity"),this.factor=1===i.parallax||2===i.parallax?.3:0,this.zoomRatio=3===i.parallax||4===i.parallax?.2:0,this.zoomType=3===i.parallax||4===i.parallax?2:0,this.zoomD=3===i.parallax?.5:4===i.parallax?1:0,this.fadeout=1===i.parallax?0:3===i.parallax?.5:1;var o=1.5<=window.devicePixelRatio?1960/window.devicePixelRatio:1960,a=this.$outer.width(),s=this.$outer.height(),r=this.$outer.offset()||{};this.blSize={w:a<=o?a:o},this.blSize.r=this.blSize.w/a,this.blSize.h=this.blSize.r*s,this.blSize.x=this.blSize.r*r.top,this.winSize={w:$("window").width()*this.blSize.r,h:$("window").height()*this.blSize.r},this.blSizeOr={w:a,h:s,x:r.top},this.offCtx=this.offScreen.getContext("2d",{alpha:!1}),this.canvas.width=0,this.canvas.height=0,this.ctx=this.canvas.getContext("2d",{alpha:!1}),this.img=document.createElement("img"),this.position={x:+this.$outer.data("bg-pos-x").replace("%","")/100,y:+this.$outer.data("bg-pos-y").replace("%","")/100},this.dispatchEvents(),this.img.onload=function(){n.loaded=!0,n.imSize={w:n.img.width,h:n.img.height},n.imSize.r=n.imSize.h/n.imSize.w,n.updateCanvasSource(),setTimeout(function(){n.$outer.addClass("ready")},30)},this.img.src=this.$outer.attr("data-image")}var t=e.prototype;return t.dispatchEvents=function(){var i=this;$(window).off("resized."+this.id+" documentresize."+this.id).on("resized."+this.id+" documentresize."+this.id,function(){i.updateCanvasSource()}),$(window).off("scroll.component-bg-"+this.id).on("scroll.component-bg-"+this.id,function(){i.pending||(i.pending=!0,i.updateInst())}),flexbe_cli.events.off("editor_change.bg_"+this.id).on("editor_change.bg_"+this.id,function(e,t){t.entity&&t.entity.id==i.id&&"editor_settings"===t.reason&&(i.ovOp=.01*t.entity.data.background.opacity,i.pending||(i.pending=!0,i.updateInst()))}),flexbe_cli.events.off("layout_change.bg_"+this.id).on("layout_change.bg_"+this.id,function(e,t){t&&t.test&&t.test.current&&t.test[t.test.current]===i.id&&i.updateCanvasSource()})},t.toggleRendering=function(e){if("boolean"!=typeof e)return!1;e!==this.visible&&(this.visible=e,$(this.overlay).toggleClass("will-change",e))},t.getCosPoint=function(e,t,i){return void 0===i&&(i=1),i<1-e&&(e=i),(1-Math.cos(Math.PI*e*t))/2},t.getZoomCoords=function(e){var t=1===this.zoomType?e:-1===this.zoomType?100-e:2===this.zoomType?100-100*this.getCosPoint(.01*e,2,this.zoomD):0,i={ratio:this.zoomRatio/100*t};return i.w=this.blSize.w*(1+i.ratio),i.h=this.blSize.h*(1+i.ratio),i.x=(i.w-this.canvas.width)/2,i.y=(i.h-this.blSize.h)/2,i},t.draw=function(e,t){var i,n=this;if(this.fadeout&&(i=1-(1-this.ovOp)*this.getCosPoint(.01*t,2,this.fadeout)),this.zoomRatio){var o=this.getZoomCoords(t);requestAnimationFrame(function(){n.overlay.style.opacity=i,n.ctx.drawImage(n.offScreen,Math.ceil(-1*o.x),Math.ceil(e*n.factor-n.winSize.h*n.factor-o.y),o.w,o.h),n.pending=!1})}else{var a=Math.ceil(e*this.factor-this.winSize.h*this.factor);requestAnimationFrame(function(){n.overlay.style.opacity=i,n.ctx.drawImage(n.offScreen,0,a),n.pending=!1})}},t.updateInst=function(){if(this.winSize.x=(window.scrollY||window.pageYOffset)*this.blSize.r,this.winSize.x+this.winSize.h>this.blSize.x-200&&this.winSize.x<this.blSize.x+this.blSize.h){this.toggleRendering(!0);var e=this.winSize.x+this.winSize.h-this.blSize.x,t=100-e/(this.blSize.h+this.winSize.h)*100;this.draw(e,t)}else this.toggleRendering(!1),this.pending=!1},t.prerender=function(){this.loaded&&(this.fitToOuter(),this.offScreen.width=this.blSize.w,this.offScreen.height=this.zoomRatio?this.blSize.h:Math.ceil(this.size.offH),this.drawOffscreenImage(this.position.x,this.position.y))},t.updateCanvasSource=function(){this.prerender(),this.updateInst()},t.drawOffscreenImage=function(e,t){(e="number"==typeof e?e:.5)<0&&(e=0),(t="number"==typeof t?t:.5)<0&&(t=0),1<e&&(e=1),1<t&&(t=1);var i,n,o,a,s=this.offCtx.canvas.width,r=this.offCtx.canvas.height;r/s<=this.imSize.r?(i=0,n=((a=(o=s)*this.imSize.r)-r)*t*-1):(n=0,i=((o=(a=r)/this.imSize.r)-s)*e*-1),this.offCtx.drawImage(this.img,i,n,o,a)},t.fitToOuter=function(){var e=1.5<=window.devicePixelRatio?1600:1960;this.blSize={w:this.$outer.width()<=e?this.$outer.width():e},this.blSize.r=this.blSize.w/this.$outer.width(),this.blSize.h=this.blSize.r*this.$outer.height(),this.blSize.x=this.blSize.r*this.$outer.offset().top,this.winSize={w:$(window).width()*this.blSize.r,h:$(window).height()*this.blSize.r},this.canvas.width=this.blSize.w,this.canvas.height=this.blSize.h,this.canvas.style.transform="scale("+1/this.blSize.r+")";var t,i=Math.max(this.winSize.h,this.blSize.h),n=i-(i-Math.min(this.winSize.h,this.blSize.h))*(this.blSize.h>this.winSize.h?this.factor:1-this.factor),o=n/this.blSize.w;(t=this.imSize.r>=o?{w:this.blSize.w,h:this.blSize.w*this.imSize.r}:{h:n,w:n/this.imSize.r}).offH=n,t.x=(t.w-this.blSize.w)/2,this.size=t},t.destroy=function(){this.destroyed=!0,$(window).off("resize."+this.id+" documentresize."+this.id),$(window).off("scroll.component-bg-"+this.id),flexbe_cli.events.off("editor_change.bl.bg_"+this.id),this.$outer.removeClass("ready"),this.offScreen.remove(),this.img.remove()},e}(),e=function(a){function e(){for(var e,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var o=(e=a.call.apply(a,[this].concat(i))||this).$component;return e.data={type:o.data("type")||"color",parallax:o.data("parallax")||0,video:o.data("video")||!1,videoParallaxFactor:.6},e.data.parallax&&flexbe_cli.run.is_mobile&&(flexbe_cli.run.is_screen_mobile_s||flexbe_cli.run.is_screen_all_mobile&&"video"===e.data.type)&&(e.data.parallax=0),e}_inheritsLoose(e,a);var t=e.prototype;return t.onInit=function(){this.loadImage(),this.imageParallaxInit(),this.videoParallaxInit()},t.onView=function(e){if(!e.state||this.isViewed||this.isBesided)return!1;this.playVideo()},t.onBeside=function(e){if(!e.state||this.isViewed||this.isBesided)return!1;this.playVideo()},t.loadImage=function(){if(!flexbe_cli.is_admin){var e,t=this.$component,i=t.find(".image, .parallax-outer"),n=i.find(".loader-image"),o=n.attr("data-src");if(o){var a=new Image;a.onload=s,a.src=o,e=setTimeout(s,1e3)}}function s(){clearTimeout(e),i.css("backgroundImage",""),t.removeClass("loading"),setTimeout(function(){n.remove()},300)}},t.imageParallaxInit=function(){if("image"!==this.data.type||!this.data.parallax)return!1;var e=this.owner,t=this.$component,i=this.data,n=e._core&&e._core.id||e.getAttribute("data-id");"object"===_typeof(e._bgEffects)&&e._bgEffects.destroy(),e._bgEffects=new o(n,t,i)},t.videoParallaxInit=function(){var i=this;if("video"!==this.data.type||!this.data.parallax||!this.owner._core)return!1;var e=$(".image-holder, .video_bg_container",this.$component),n=e.find(".image, .video_bg_player"),o=this.owner._core;flexbe_cli.resize.height<o.tween.height&&500<o.tween.width?e.css("height",o.tween.height+"px"):e.css("height","");var t=!1,a=function(){var e=o.tween.start,t=1-(1-i.data.videoParallaxFactor)*(o.tween.height/flexbe_cli.resize.height);t<0&&(t=i.data.videoParallaxFactor/2),n.css("transform","translate3d(0, "+-(window.pageYOffset-e)*t+"px, 0)")};a(),$(window).off("scroll.component-bg-"+o.id).on("scroll.component-bg-"+o.id,function(){!t&&o.tween.onscreen&&(t=!0,requestAnimationFrame(function(){a(),t=!1}))})},t.playVideo=function(){var e=this,t=this.$component,i=this.data,n=i.video;if("video"!==i.type||!n||"youtube"!==n.type||!n.id)return!1;if(flexbe_cli.run.is_mobile||flexbe_cli.run.is_screen_all_mobile)return!1;if(t.data("video_bg_played")){if(n.id===t.data("video_bg_played"))return;this.destroyVideo()}t.data("video_bg_played",n.id),flexbe_cli.require(["/js/jquery.youtubebackground.js"],function(){t.YTPlayer({videoId:n.id,videoURL:n.url,callback:function(){e.videoParallaxInit(),setTimeout(function(){e.videoParallaxInit()},1e3)}})})},t.destroyVideo=function(){var e=this.$component;e.data("ytPlayer")&&e.data("ytPlayer").destroy(),e.removeData("video_bg_played")},e}(BaseComponent);flexbe_cli.components.classes.background=e}(),function(){var s={},r=function(e,t){void 0===t&&(t=function(){});var i=new Image;return i.onload=function(){"function"==typeof i.remove&&i.remove(),t(i)},i.src=e,i},l=function(e,t){var i=e.id,n=e.name,o=e.ext,a=e.resizable,s=Math.max(1,window.devicePixelRatio||1);return t=Math.round(Math.min(2560,t*s)),["/img/"+i,a&&t?"_"+t:"",o?"."+o:"/"+n].join("")},e=function(a){function e(){for(var e,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];if((e=a.call.apply(a,[this].concat(i))||this).is="image",e.autoSet=!0,e.params={},e.component.getAttribute("data-img-loaded")&&(e.imageLoaded=!0,e.autoSet=!1),e.img=e.$component.find("img").get(0),e.layer=e.$component.find("[data-img-layer]").get(0)||e.component,e.overlay=e.$component.find(".overlay-content").get(0),!e.img)return e;var o=e.$component.parent();return o.hasClass("slider-item")&&(o.closest(".component-slider").attr("data-current-index")==o.attr("data-real-index")||(e.autoSet=!1)),e.$component.on("setImage sliderActivate",function(){e.set()}),e}_inheritsLoose(e,a);var t=e.prototype;return t.onInit=function(){this.isUpdated&&this.set()},t.onView=function(e){if(!e.state||!this.autoSet||this.isSet)return!1;this.set()},t.onBeside=function(e){if(!e.state||!this.autoSet||this.isSet)return!1;this.set()},t.onResize=function(){this.updateSize(),this.setOverlaySize()},t.set=function(e){var a=this;void 0===e&&(e=!1),(e||!this.isSet&&this.isVisible&&!this.imageLoaded)&&(this.isSet=!0,this.updateParams(),this.updateSize(),this.setOverlaySize(),this.getOptimalSize(function(e){var t=e.width,i=a.params,n=l(i,t),o=setTimeout(function(){a.setImage(n)},1e3);r(n,function(){a.setImage(n),clearTimeout(o)})}))},t.setImage=function(e){var t=this,i=this.params;if(e||(e=l(i)),this.imageLoaded||(this.imageLoaded=!0,requestAnimationFrame(function(){t.$component.removeClass("loading")})),this.img&&this.img.src===e)return!1;if(this.img&&(this.img.src=e),"background"===i.type){var n="url("+e+")",o=i.x+" "+i.y;this.layer.style.backgroundImage=n,this.layer.style.backgroundPosition=o}},t.setOverlaySize=function(){var e=this.overlay,t=this.componentWidth,i=this.componentHeight;if(e){var n="medium";650<=t&&400<=i?n="large":(t<=400||i<=250)&&(n="small"),e.setAttribute("data-size",n)}},t.updateParams=function(){var e=this.params,t=this.component,i=this.img;if(!e.id){var n=t.getAttribute("data-img-id");if(s[n])e=_extends({},s[n]);else{if(e.id=n,e.ext=t.getAttribute("data-img-ext"),e.type=t.getAttribute("data-img-type"),e.name=t.getAttribute("data-img-name"),e.proportion=+t.getAttribute("data-img-proportion")/100,!e.ext){var o=e.name.match(/\.(!:jpeg|jpg|png|gif|bmp|webp|svg)$/i)||[];e.ext=o[1]||"jpg"}e.resizable=!["svg","gif"].includes(e.ext)}e.x=t.getAttribute("data-img-x"),e.y=t.getAttribute("data-img-y")}return!e.proportion&&i&&i.src&&(e.proportion=i.naturalHeight/i.naturalWidth),s[e.id]||(s[e.id]=_extends({},e)),this.params=e},t.updateSize=function(){var e=this.component;this.componentWidth=Math.round(e.offsetWidth),this.componentHeight=Math.round(e.offsetHeight)},t.getProportion=function(t){void 0===t&&(t=function(){});var i=this.params;if(i.proportion)t(i.proportion);else{var e=l(i,50);r(e,function(e){i.proportion=e.naturalHeight/e.naturalWidth,s[i.id]&&(s[i.id].proportion=i.proportion),t(i.proportion)})}},t.getOptimalSize=function(n){void 0===n&&(n=function(){});var o=this.componentWidth,a=this.componentHeight,s=a/o;this.getProportion(function(e){var t,i;i=e<s?(t=a/e,a):(t=o)*e,t=Math.round(t),i=Math.round(i),n({width:t,height:i})})},e}(BaseComponent);flexbe_cli.components.classes.image=e,flexbe_cli.components.helpers.replacePlaceholder=function(e){var t=$(e);t&&0!==t.length&&t.each(function(e,t){var i=$(t).data("src"),n=$(t).data("srcset"),o=new Image;o.onload=function(){i&&(t.src=i),n&&(t.srcset=n),$(t).addClass("loaded")},i&&(o.src=i),n&&(o.srcset=n)})}}(),function(){var e=function(a){function e(){for(var e,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];(e=a.call.apply(a,[this].concat(i))||this).is="video",e.type=e.$component.data("type"),e.autoplay=!!+e.$component.data("autoplay"),e.$preview=e.$component.find(".video-preview"),e.hasPreview=e.$preview.length,e.frameLoaded=!1,e.autoSet=!e.hasPreview;var o=e.$component.parent();return o.hasClass("slider-item")&&(o.closest(".component-slider").attr("data-current-index")===o.attr("data-real-index")||(e.autoSet=!1)),e.$component.off("sliderActivate").on("sliderActivate",function(){e.set()}),e.$component.off("sliderDeactivate").on("sliderDeactivate",function(){e.pause()}),e}_inheritsLoose(e,a);var t=e.prototype;return t.onInit=function(){this.bindEvents()},t.onView=function(e){var t=this,i=e.state;if(i?this.autoplay&&this.onFrameLoaded(function(){t.play()}):this.pause(),!i||!this.autoSet||this.isViewed||this.isBesided)return!1;this.set()},t.onBeside=function(e){if(!e.state||!this.autoSet||this.isViewed||this.isBesided)return!1;this.set()},t.onPageLoad=function(){var e=this;setTimeout(function(){if(!e.autoSet||e.isViewed||e.isBesided)return!1;e.set()},2e3)},t.bindEvents=function(){var i=this;this.hasPreview&&!flexbe_cli.is_admin&&this.$preview.on("click",function(e){var t=$(e.currentTarget).parents(".slider-wrapper").get(0);e.preventDefault(),t&&t.swiper&&t.swiper.autoplay&&t.swiper.autoplay.pause(),i.set({autoplay:!0}),setTimeout(function(){i.$component.attr("data-state","play")},250)})},t.set=function(e){var t=(void 0===e?{}:e).autoplay;if(this.isSet)return!1;this.isSet=!0;var i=this.component.querySelector("iframe");if(!i)return!1;var n=i.getAttribute("data-src"),o=i.getAttribute("src");n&&!o&&(i.src=n+(t?"&autoplay=1":""))},t.play=function(){var e=this.component.querySelector("iframe"),t=e&&e.contentWindow;if(!t)return!1;this.isPaused=!1,"vimeo"===this.type?t.postMessage({method:"play"},"*"):t.postMessage('{"event":"command","func":"playVideo","args":""}',"*")},t.pause=function(){var e=this.component.querySelector("iframe"),t=e&&e.contentWindow;if(!t)return!1;this.isPaused=!0,"vimeo"===this.type?t.postMessage({method:"pause"},"*"):t.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")},t.onFrameLoaded=function(e){var t=this;this.frameLoaded?"function"==typeof e&&e():this.component.querySelector("iframe").onload=function(){t.frameLoaded=!0,"function"==typeof e&&e()}},e}(BaseComponent);flexbe_cli.components.classes.video=e}(),function(){function y(e,t,i,n){var o=$(e),a=t?'[data-component="'+t+'"]':"[data-component]";o.is(a)?o.trigger(i,n):$(e).find(a).each(function(e,t){$(t).trigger(i,n)})}function c(e){return["normal","active"].includes(e)}var w=function(){function e(e,t){if(t=_extends({init:!0,targets:"span",active:0},t),"object"!==_typeof(e)||!e.querySelectorAll)return!1;Array.isArray(t.targets)||t.targets instanceof NodeList||t.targets instanceof HTMLCollection?this.targets=Array.from(t.targets):this.targets=Array.from(e.querySelectorAll(t.targets)),this.pagination=e,this.options=t,this.active=t.active,this.visible=t.visible||+e.getAttribute("data-bullets-visible"),this.visible||(this.visible=8<=this.targets.length?3:this.targets.length),t.init&&this.setActive(this.active,!0)}return e.prototype.setActive=function(e,t){var a,s,i=this.targets,n=this.active,r=this.oldMap,o=this.newMap;if(!i.length)return e;if(e=Math.max(Math.min(e,i.length-1),0),r=r&&r.length?r:i.map(function(e){return{target:e,state:e.getAttribute("data-state")||"hidden"}}),(t?0:r.reduce(function(e,t){return e+(c(t.state)?1:0)},0))!==this.visible)s=Math.min(e+this.visible-1,i.length-1),a=Math.max(s-this.visible+1,0),o=r.map(function(e,t){var i=e.target;return e.state,{target:i,state:a<=t&&t<=s?"normal":"hidden"}});else{var l=function e(t){var i=t.from,n=t.to,o=t.map,a=t.move,s=void 0===a?0:a,r=o[n-s],l=r&&c(r.state);return!r||l?s:i<n?e({from:i,to:n,map:o,move:s+1}):n<i?e({from:i,to:n,map:o,move:s-1}):s}({from:n,to:e,map:r});o=r.map(function(e,t){var i=e.target,n=e.state,o=r[t-l];return"normal"==(n=o&&o.state&&c(o.state)?"normal":"hidden")&&(void 0===a&&(a=t),s=t),{target:i,state:n}})}return o[e].state="active",o[a-1]&&(o[a-1].state="next"),o[a-2]&&(o[a-2].state="more"),o[s+1]&&(o[s+1].state="next"),o[s+2]&&(o[s+2].state="more"),i.forEach(function(e,t){e.setAttribute("data-state",o[t].state)}),this.active=e,this.oldMap=o,e},e}(),x=function(){function e(e,t){this.options=_extends({init:!0,tag:"span"},t),this.pagination=e,this.tag=this.options.tag,this.filled=!1,this.states=["hidden","more","next","active","next","more","hidden"],this.init()}var t=e.prototype;return t.init=function(){this.bindEvents(),this.options.init&&this.fillPagination({states:this.states,force:!0})},t.bindEvents=function(){var e=this.tag,t=this.pagination,o=this.options,i=$(t);"function"==typeof o.onClick&&i.on("click",e,function(e){var t=$(e.currentTarget),i=+t.siblings('[data-state="active"]').attr("data-index"),n=+t.attr("data-index")-i;o.onClick(n)})},t.setActive=function(i,e,t){var n=this.states,o=this.filled&&i;if(this.fillPagination({states:n,force:!0,activeIndex:e,inRow:t}),o){var a=n.map(function(e,t){return("prev"===i?n[t+1]:n[t-1])||"hidden"});this.pagination.offsetWidth,this.fillPagination({states:a})}},t.fillPagination=function(e){var t=void 0===e?{}:e,n=t.states,i=t.force,o=$(this.pagination),a=this.tag;if(this.filled=!0,i){var s=n.reduce(function(e,t,i){return e+"<"+a+' data-index="'+i+'" class="swiper-pagination-bullet" data-state="'+t+'"></'+a+">"},"");o.html(s)}else o.find(a).each(function(e,t){var i=$(t);i.attr("data-state",n[e]||"hidden"),i.attr("data-index",e)})},e}(),e=function(s){function e(){for(var e,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var o=(e=s.call.apply(s,[this].concat(i))||this).component;e.require=["/js/swiper.v4.js"],e.is="slider",e.swiper=null,e.wrapperEl=o.querySelector(".slider-wrapper"),e.paginationEl=o.querySelector(".slider-pagination"),e.prevEl=o.querySelector('.slider-prev, [data-direction="prev"]'),e.nextEl=o.querySelector('.slider-next, [data-direction="next"]');var a=e.paginationEl&&e.paginationEl.getAttribute("data-type")||"bullets";return e.options={count:o.getAttribute("data-count"),paginationType:a,loop:Boolean(!flexbe_cli.is_admin&&Math.floor(o.getAttribute("data-loop"))),autoplay:!flexbe_cli.is_admin&&Math.floor(o.getAttribute("data-autoplay"))||!1},e}_inheritsLoose(e,s);var t=e.prototype;return t.onInit=function(){this.isUpdated&&this.isLoaded&&this.initSwiper()},t.onLoad=function(){if(!this.inView&&!this.inBeside)return!1;this.initSwiper()},t.onView=function(e){var t=e.state;if(!this.isLoaded)return!1;this.swiper||this.initSwiper(),this.toggleAutoplay({state:t})},t.onBeside=function(e){if(!e.state||!this.isLoaded||this.swiper)return!1;this.initSwiper()},t.onResize=function(){this.setComponentSize(),this.swiper&&this.swiper.update()},t.initSwiper=function(){var o=this;if(this.swiper||this.options.count<=1||"undefined"==typeof Swiper)return!1;this.setComponentSize();var e=this.options,a=this.component,t=this.owner,s=this.root,i=this.index,n=this.wrapperEl,r=this.paginationEl,l=this.prevEl,c=this.nextEl,d=(t._core&&t._core.id||"-")+":"+i,f=e.count,u=e.loop,h=e.paginationType,p={prevEl:l,nextEl:c},m={el:r,type:h,clickable:4!==flexbe_cli.theme_id||!u,modifierClass:"slider-pagination-"},v=!!e.autoplay&&{delay:1e3*e.autoplay,stopOnLastSlide:!u},g=0;if(flexbe_cli.is_admin){s._sliderState||(s._sliderState={});var _=s._sliderState;_[d]&&(g=Math.max(0,Math.min(f-1,_[d])||0)),_[d]=g}this.$component.one("mouseover.loadImages touchstart.loadImages",function(){o.$component.off(".loadImages"),y(o.$component,"image","setImage")}),this.swiper=new Swiper(n,{init:!1,speed:450,wrapperClass:"slider",slideClass:"slider-item",slideActiveClass:"active",noSwipingClass:"redactor-box",initialSlide:g,navigation:p,pagination:m,autoplay:v,loop:u,simulateTouch:!flexbe_cli.is_admin,roundLengths:!0,touchMoveStopPropagation:!1,preventClicksPropagation:!0,preventClicks:!0,runCallbacksOnInit:!1}),this.swiper.on("init",function(){$(l).add(c).removeClass("disabled"),u&&($(".swiper-slide-duplicate",a).find(".component-image").removeAttr("data-lg"),flexbe_cli.components.initComponents({core:o.owner._core}))});var b=!1;this.swiper.on("slideChangeTransitionEnd",function(){var e=o.swiper;u&&e.activeIndex!==e.realIndex+1?(b=!0,e.slideToLoop(e.realIndex,0)):b=!1}),this.swiper.on("slideChange",function(){var e=o.swiper;if(!b){var t=e.slides[e.previousIndex],i=e.slides[e.activeIndex],n=i&&i.getAttribute("data-type")||"image";a.setAttribute("data-current-content",n),flexbe_cli.is_admin&&(s._sliderState[d]=e.realIndex),y(t,!1,"sliderDeactivate"),y(i,!1,"sliderActivate")}}),this.swiper.on("paginationRender",function(){4===flexbe_cli.theme_id&&"bullets"===m.type&&(u?o.loopPagination=new x(r,{init:!1,tag:"span",onClick:function(e){e<0?o.swiper.slidePrev():0<e&&o.swiper.slideNext()}}):o.bulletsPagination=new w(r,{init:!1,targets:"span",active:o.swiper.realIndex})),$(r).removeClass("disabled")}),this.swiper.on("paginationUpdate",function(){if(!b)if(o.bulletsPagination)o.bulletsPagination.setActive(o.swiper.realIndex);else if(o.loopPagination){var e=o.swiper.previousIndex<o.swiper.activeIndex?"next":"prev";o.loopPagination.setActive(e)}}),this.swiper.init(),this.toggleAutoplay({state:this.inView})},t.toggleAutoplay=function(e){var t=e.state;if(!this.swiper)return!1;var i=this.swiper;this.options.autoplay&&i.autoplay&&(t&&!i.autoplay.running?i.autoplay.start():!t&&i.autoplay.running&&i.autoplay.stop())},t.setComponentSize=function(){this.$component.css("width","");var e=this.$component.outerWidth();0<e%1&&this.$component.css("width",parseInt(e,10)+"px")},e}(BaseComponent);flexbe_cli.components.classes.slider=e,flexbe_cli.components.classes.bulletsPagination=w,flexbe_cli.components.classes.bulletsLoopPagination=x}(),function(){var e=function(o){function e(){for(var e,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return(e=o.call.apply(o,[this].concat(i))||this).is="button",e}_inheritsLoose(e,o),e.getProductInfo=function(e,t){void 0===t&&(t=!1);var i=flexbe_cli.theme_id<4?e.closest("[data-item-id], .modal-data").eq(0):e.parents("[data-item-id], .content-zone, .flexbe-card, .flexbe-column, .modal-content").last(),n=t?{}:e.data("product");if(!1!==n){if((n=_extends({},n)).count||(n.count=1),!n.img){var o=i.find("[data-img-id]").filter(function(e,t){return!$(t).closest(".swiper-slide-duplicate").length}).eq(0),a=o.attr("data-img-id"),s=o.attr("data-img-name");n.img=!(!a||!s)&&"/img/"+a+"_200/"+s}if(!n.title){var r=i.find(".name, .title, .item-title, .text_title, .element-text--title, .text-style-title, .text-style-subtitle").eq(0);r.length||(r=i.find(".text-style-conntent").eq(0)),n.title=r.text().trim()||""}if(!n.price&&0!==n.price){var l=i.find(".price, .item-price, .main-price, .element-text--price").eq(0).clone();l.length||(l=i.clone()),l.find("del, s, strike").remove();var c=l.text().replace(/[,.]/g,".").replace(/\.$/,"");c=c.match(/(?:[1-9] ?[0-9]{0,3} ?[0-9]{0,3})(?:[\.,][0-9]{1,2})?/g),c=(c=String(c&&c[0]||"")).replace(/[^\d]/,""),c=parseInt(c,10)||0,n.price=c}}return n};var t=e.prototype;return t.onInit=function(){this.$component.off("click.core-component").on("click.core-component",this.onClick.bind(this))},t.onClick=function(e){if(flexbe_cli.is_admin)return e.preventDefault(),!0;var t=this.$component,i=t.attr("data-action"),n=this.owner.getAttribute("data-id");if(!i)return!0;var o=t.attr("data-modal-id"),a=flexbe_cli.stat.getGoal(i,o);flexbe_cli.stat.reach_goal(a);try{var s=t.find('[name="goal"]').val();s&&flexbe_cli.stat.reach_goal(s);var r=t.find('[name="goal_html"]').val();r&&($("body").find(".button-html-goal").detach(),$("body").eq(0).append('<div class="button-html-goal" style="display:none"></div>'),$("body").find(".button-html-goal").html(r))}catch(e){console.warn(e.message)}var l=!1;if(!["link","file","close","quiz"].includes(i)&&!(l=this.constructor.getProductInfo(t)||{}).id){var c=flexbe_cli.p_id,d=t.closest("[data-item-id]").attr("data-item-id")||0,f=this.root&&this.root.getAttribute("data-multivar")||"";l.id=""+c+n+d+f}if(l&&(l.title&&"-"!==l.title||l.price)||(l=!1),o&&i.match(/^modal|^form/))flexbe_cli.modal.find(o)||(o=parseInt(String(n).split("_")[0],10)+"_"+o),flexbe_cli.events.emit("mobilemenu_command",{command:"close"}),flexbe_cli.events.emit("modal_command",{command:"open",id:o,data:{items:l?[l]:[]}});else if(l&&i.match(/^cart$/)){var u=t.closest(".m_modal").length;t.addClass("animate-add-to-cart"),setTimeout(function(){t.removeClass("animate-add-to-cart"),u&&(flexbe_cli.events.emit("modal_command",{command:"close"}),flexbe_cli.events.emit("cart_command",{command:"add",item:l}))},1600),u||flexbe_cli.events.emit("cart_command",{command:"add",item:l})}else"quiz"===i?flexbe_cli.events.emit("quiz_command",{command:"start",id:n}):"close"===i&&flexbe_cli.events.emit("modal_command",{command:"close"})},e}(BaseComponent);flexbe_cli.components.classes.button=e}(),function(){var e=function(o){function e(){for(var e,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return(e=o.call.apply(o,[this].concat(i))||this).is="map",e.$map=e.$component,e.data=e.$component.data("data"),e.$component.removeAttr("data-data"),e}_inheritsLoose(e,o);var t=e.prototype;return t.onInit=function(){this.isUpdated&&this.isLoaded&&this.createMap()},t.onLoad=function(){(this.inView||this.inBeside)&&this.createMap()},t.onView=function(e){var t=e.state;if(!this.isLoaded)return!1;!t||this.isViewed||this.isBesided||this.createMap()},t.onBeside=function(e){var t=e.state;if(!this.isLoaded)return!1;!t||this.isViewed||this.isBesided||this.createMap()},t.createMap=function(){},e}(BaseComponent),i=function(o){function e(){for(var e,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return(e=o.call.apply(o,[this].concat(i))||this).require=["//api-maps.yandex.ru/2.1/?lang=ru_RU"],e}_inheritsLoose(e,o);var t=e.prototype;return t.onResize=function(){var e=this.map;e&&e.container.fitToViewport()},t.createMap=function(){var e=this;"undefined"!=typeof ymaps&&ymaps.ready(function(){e.createVendor(),e.setPlaces(),e.dispatchEvents(),e.fixBehavior(),e.$component.trigger("mapInit"),e.$component.removeClass("loading")})},t.createVendor=function(){this.map&&this.map.destroy(),this.map=new ymaps.Map(this.$component.find(".map")[0],{center:this.data.center,zoom:this.data.zoom,controls:["zoomControl"],behaviors:["default","scrollZoom"],type:"yandex#map"})},t.setPlaces=function(){var n=this,o=this.map,e=this.data;if(o){o.geoObjects.removeAll();var t=ymaps.templateLayoutFactory.createClass('<svg title="$[properties.balloonContent]" class="placemark" width="32" height="48" viewBox="0 0 24 32" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36 0 0 5.36 0 12c0 8 12 20 12 20s12-12 12-20c0-6.64-5.36-12-12-12zm0 8a4 4 0 0 1 4 4c0 2.22-1.78 4-4 4a4 4 0 0 1-4-4c0-2.2 1.8-4 4-4z" fill="$[properties.color]" fill-rule="evenodd"/></svg>');ymaps.layout.storage.get("custom#placemark")||ymaps.layout.storage.add("custom#placemark",t),e.places.forEach(function(e,t){e.color=e.color||"#3D52B0";var i=new ymaps.Placemark(e.coords,{balloonContentHeader:e.name||!1,balloonContent:e.address,color:e.color},{hideIconOnBalloonOpen:!1,balloonOffset:[0,-48],balloonCloseButton:!1,iconLayout:"custom#placemark",iconShape:{type:"Rectangle",coordinates:[[-16,-48],[16,0]]}});i.events.add("balloonopen",function(){n.$component.trigger("balloonOpen",t,e)}),o.geoObjects.add(i),e._mark=i})}},t.dispatchEvents=function(){var n=this.data,o=this.map;o&&(this.$component.on("selectMark",function(e,t){if(n.places.length&&n.places[t]){var i=n.places[t];o.setCenter(i.coords,n.zoom,{duration:350,checkZoomRange:!0}).then(function(){o.setCenter(i.coords)}),i._mark&&i._mark.balloon.open()}}),this.$component.on("resizeMap",function(){o.container.fitToViewport()}))},t.fixBehavior=function(){var e,t=this.map;t&&(t.behaviors.disable("scrollZoom"),this.$component.off("mouseenter.preventzoom").on("mouseenter.preventzoom",function(){e=setTimeout(function(){t.behaviors.enable("scrollZoom")},500)}),this.$component.off("mouseleave.preventzoom").on("mouseleave.preventzoom",function(){e&&(clearTimeout(e),t.behaviors.disable("scrollZoom"))}),flexbe_cli.run.is_mobile&&t.behaviors.disable("drag"))},e}(e),n=function(a){function e(){for(var e,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];e=a.call.apply(a,[this].concat(i))||this;var o=flexbe_cli.google_maps_api_key||"AIzaSyBZ5MufayEgZaNJ-dDo6epfouAZr5wATEs";return e.require=["//maps.googleapis.com/maps/api/js?key="+o],e}_inheritsLoose(e,a);var t=e.prototype;return t.createMap=function(){"undefined"!=typeof google&&(this.createVendor(),this.styleMap(),this.setPlaces(),this.dispatchEvents(),this.fixBehavior(),this.$component.trigger("mapInit"),this.$component.removeClass("loading"))},t.createVendor=function(){var e=this.data;this.map=new google.maps.Map(this.$component.find(".map")[0],{center:{lat:e.center[0],lng:e.center[1]},zoom:e.zoom,disableDefaultUI:!0,panControl:!0,zoomControl:!0,mapTypeControl:!1,streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1})},t.dispatchEvents=function(){var i=this,e=this.$component,t=this.map;t&&(e.on("selectMark",function(e,t){i.selectMark(t,!0)}),e.on("resizeMap",function(){google.maps.event.trigger(t,"resize")}))},t.setPlaces=function(){var o=this,e=this.data,a=this.map;a&&e.places.forEach(function(e,t){var i='<svg width="32" height="48" viewBox="0 0 24 32" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36 0 0 5.36 0 12c0 8 12 20 12 20s12-12 12-20c0-6.64-5.36-12-12-12zm0 8a4 4 0 0 1 4 4c0 2.22-1.78 4-4 4a4 4 0 0 1-4-4c0-2.2 1.8-4 4-4z" fill="'+(e.color||"#222")+'" fill-rule="evenodd"/></svg>',n=new google.maps.Marker({position:{lat:e.coords[0],lng:e.coords[1]},map:a,visible:!0,animation:google.maps.Animation.DROP,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(i)}});(e._mark=n).addListener("click",function(){o.selectMark(t)})})},t.styleMap=function(){var e=this.data,t=this.map;if(t)if("default"!==e.style&&e.style){var i="/_s/lib/google/maps/styles/"+e.style+".json";$.getJSON(i,function(e){e&&Array.isArray(e)&&t.setOptions({styles:e})})}else t.setOptions({styles:[]})},t.selectMark=function(e,t){void 0===t&&(t=!1);var i=this.data,n=this.map,o=i.places;if(n&&o&&o.length&&o[e]){o.forEach(function(e){return e._info&&e._info.close()});var a=o[e],s="";a.name&&(s+='<div style="margin-bottom: 3px;"><strong>'+a.name+"</strong></div>"),a.address&&(s+="<div>"+a.address+"</div>"),a._info=new google.maps.InfoWindow({content:s}),a._info.open(n,a._mark),t&&n.panTo({lat:a.coords[0],lng:a.coords[1]}),this.$component.trigger("balloonOpen",e,a)}},t.fixBehavior=function(){var e,t=this.$component,i=this.map;i&&(t.off("mouseenter.preventzoom").on("mouseenter.preventzoom",function(){e=setTimeout(function(){i.setOptions({scrollwheel:!0})},500)}),t.off("mouseleave.preventzoom").on("mouseleave.preventzoom",function(){e&&(clearTimeout(e),i.setOptions({scrollwheel:!1}))}))},e}(e);flexbe_cli.components.classes.map=function(e){var t=e.args[0]||"yandex";return"google"===t&&!flexbe_cli.is_admin&&String(flexbe_cli.google_maps_api_key.length)<32&&(t="yandex"),new("google"===t?n:i)(e)}}(),function(){var a={phone:{RUS:["+7 (***) ***-**-**","8 (***) ***-**-**"],KAZ:["+7 (***) ***-**-**","8 (***) ***-**-**"],UKR:["+38 (***) ***-****"],BLR:["+375 ** *******"],USA:["+1 (***) ***-****"]}},e=function(o){function e(){for(var e,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return(e=o.call.apply(o,[this].concat(i))||this).is="form",e.ownerId=e.owner.getAttribute("data-id"),e.eventId="."+e.ownerId,e.$form=e.$component.find("form"),e.$fields=e.$form.find(".form-fields"),e.action=e.$form.find('input[name="action"]').val(),e.$form.find('input[name="p_id"]').val(flexbe_cli.p_id),e}_inheritsLoose(e,o),e.getDefaultMask=function(e){var t=String(e).toLowerCase(),i=flexbe_cli.lang.country,n=a[t]&&a[t][i];return n&&"string"==typeof n&&(n=[n]),_extends([],n)},e.initMask=function(e){if("undefined"==typeof IMask)return!1;var t={lazy:!0,padFractionalZeros:!0,definitions:{0:void 0,"*":/[0-9]/}},i=e.getAttribute("data-required"),n=e.getAttribute("data-mask");n=n&&!/[ ()*{}]/.test(n)?flexbe_cli.components.classes.form.getDefaultMask(n):[n];try{n=1===(n=n.filter(function(e){return/[ ()*_{}]/.test(e)})).length?String(n[0]):n.map(function(e){return _extends({},t,{mask:e})});var o=new IMask(e,_extends({},t,{mask:n,dispatch:function(e,t){var i=t.compiledMasks;if(1==i.length)return i[0];var n=(t.value+e).replace(/\W/g,"");return i.find(function(e){var t=e.mask.replace(/\W/g,"")[0];return n[0]==t})||i[0]}}));o.on("accept",function(){o.masked.isComplete||!i&&!o.value?e.setAttribute("data-mask-complete",!0):e.removeAttribute("data-mask-complete"),e.setAttribute("value",o.value)}),e._mask=o}catch(i){return e.removeAttribute("data-mask"),!1}};var t=e.prototype;return t.onInit=function(){this.$masked=this.$form.find("[data-mask]"),!flexbe_cli.is_admin&&this.$masked.length&&(this.needInitMasks=!0,this.require=["/ja/imask.min.js"])},t.onLoad=function(){this.needInitMasks&&(this.isViewed||this.isBesided)&&this.inputMask()},t.onView=function(e){if(!e.state||this.isViewed||this.isBesided)return!1;this.formInit()},t.onBeside=function(e){if(!e.state||this.isViewed||this.isBesided)return!1;this.formInit()},t.onOpen=function(e){void 0===e&&(e={}),this.$component.find(".form-field").find("input, textarea").eq(0).focus(),e.data&&this.setData(e.data)},t.formInit=function(){if(this.formInited)return!1;this.formInited=!0,this.unbindEvents(),this.bindEvents(),this.customize()},t.customize=function(){this.fileInput(),this.customSelect(),this.enterSubmit(),this.textResize(),this.needInitMasks&&this.isLoaded&&this.inputMask()},t.unbindEvents=function(){this.$component.off(this.eventId),this.$form.off(this.eventId)},t.bindEvents=function(){var e=this;this.$fields.find(".form-field-text > input, .form-field-text > textarea").on("input"+this.eventId+" change"+this.eventId,function(e){var t=e.currentTarget,i=t.value,n=$(t);n.attr("value",i),n.closest(".form-field").removeClass("is_error")}),this.$form.on("click"+this.eventId,".form_field_submit, .form-field-submit",function(){e.$form.submit()}),this.$form.on("submit"+this.eventId,function(){if(e.busy||!e.validateForm())return!1;if(e.busy=!0,flexbe_cli.stat.u_id&&e.addFields([{name:"f_uid",type:"hidden",value:flexbe_cli.stat.u_id}],!1),"function"==typeof e.beforeSend&&!1===e.beforeSend())return e.busy=!1;if(e.addFields([{name:"jsform",type:"hidden",value:parseInt(448312,10)}],!1),"undefined"!=typeof FormData)e.sendFormdata();else{if(!(e.$form.find('input[type="file"]').length<1))return!0;e.sendAjax()}return!1})},t.setData=function(e){if(!e)return!1;e&&e.fields&&this.addFields(e.fields),e&&e.items&&this.addItems(e.items)},t.onBeforeSend=function(e){"function"==typeof e&&(this.beforeSend=e)},t.onAfterSent=function(e){"function"==typeof e&&(this.afterSent=e)},t.addFields=function(e,t){void 0===t&&(t=!0);var i=this.$form.find(".form_fields_advanced");e.length&&i[0]&&(t&&i.empty(),e.forEach(function(e){i.find('input[name="'+e.name+'"]').remove();var t=$("<input>").attr("type",e.type).attr("name",e.name).attr("value",e.value);i.append(t)}))},t.addItems=function(e){if(void 0===e&&(e=[]),e&&e.length){var t=0,i=0,n="",o=[];e=e.map(function(e){return"object"!==_typeof(e)?{}:(e.count=parseInt(e.count,10)||1,e.price=parseFloat(e.price)||0,e.title="string"==typeof e.title&&e.title.trim()||e.title||"",t+=e.price*e.count||0,i+=e.count,e)});try{n=JSON.stringify(e)}catch(e){}o.push({type:"hidden",name:"product[items]",value:n}),o.push({type:"hidden",name:"product[price]",value:t}),o.push({type:"hidden",name:"product[total]",value:i}),t&&(o.push({type:"hidden",name:"pay[price]",value:t}),o.push({type:"hidden",name:"pay[desc]",value:1<i?"Товаров в корзине: "+i:e[0].title})),this.addFields(o)}},t.sendFormdata=function(){var t=this,e=new FormData(this.$form.get(0));if(e.append("is_ajax","true"),"undefined"!=typeof flexbeAPI&&void 0!==flexbeAPI.customLeadData&&e.append("customLeadData",JSON.stringify(flexbeAPI.customLeadData)),flexbe_cli.run.is_OSX&&"function"==typeof e.entries){var i=e.entries(),n=Array.isArray(i),o=0;for(i=n?i:i[Symbol.iterator]();;){var a;if(n){if(o>=i.length)break;a=i[o++]}else{if((o=i.next()).done)break;a=o.value}var s=a,r=s[0],l=s[1];"object"===_typeof(l)&&l instanceof File&&0===l.size&&e.delete(r)}}e.append("f_ab",JSON.stringify(flexbe_cli.stat.AB.getcookie())),this.$component.addClass("submitting");var c=$.ajax({url:this.$form.attr("action"),type:"POST",dataType:"json",processData:!1,contentType:!1,data:e,xhr:function(){return $.ajaxSettings.xhr()}});c.done(function(e){t.$component.addClass("success submit-ok"),t.$component.removeClass("submitting"),e.send_formdata=!0,void 0!==e.pay&&(t.pay=e.pay),t.showDone(),setTimeout(function(){t.$component.removeClass("success submit-ok")},1e3)}),c.fail(function(e){console.error("sendFormdata error: ",e),t.busy=!1,t.$component.removeClass("submitting")})},t.sendAjax=function(){var t=this,e=this.$form.serialize();$.ajax({url:this.$form.attr("action"),type:"POST",dataType:"json",data:e+"&is_ajax=true"}).done(function(e){t.$form.get(0).reset(),e.send_ajax=!0,void 0!==e.pay&&(t.pay=e.pay),t.showDone()}).fail(function(e){console.error("sendAjax: Ошибка при отправке формы",e),t.busy=!1,t.$component.removeClass("submitting")})},t.resetForm=function(){this.$form.get(0).reset(),this.$form.find(".file-input-outer").removeClass("active"),this.$fields.find("input:not(:hidden)").each(function(e,t){t.value=null,t.checked=!1,t.removeAttribute("value"),t.removeAttribute("checked"),t.removeAttribute("data-mask-complete"),t._mask&&t._mask.updateValue()})},t.validateForm=function(){var l=this,c=!0,d=!0;return this.$form.find("[data-type]").each(function(e,t){var i=$(t),n=i.find("input, textarea, select").not('[type="hidden"]')[0],o="checkbox"===n.type?n.checked:n.value,a=l.checkField(n);if(i.removeClass("is_error"),a){var s=i.attr("data-type"),r=i.find(".error");i.outerWidth(),i.addClass("is_error"),r.length&&(r.attr("title",a),r.find(".error-text").text(a)),"checkbox"===s&&i.find(".form-field-checkbox--box").attr("title",a),c=!1}d&&o&&(d=!1)}),this.$fields.removeClass("all-fields-empty"),this.$fields.removeClass("has-error"),this.$fields.outerWidth(),c||this.$fields.addClass("has-error"),d&&(this.$fields.toggleClass("all-fields-empty",d),4===flexbe_cli.theme_id&&(c=!1)),c},t.showDone=function(){this.resetForm(),"function"==typeof this.afterSent&&this.afterSent(),this.busy=!1,flexbe_cli.stat.reach_goal("order_done");try{var e=this.$form.find('input[name="goal"]').val();void 0!==e&&""!==e&&flexbe_cli.stat.reach_goal(e)}catch(e){}try{var t=this.$form.find('textarea[name="goal_html"]').val();if("string"==typeof t&&t.trim()){var i=document.write;document.write=function(e){$("body").eq(0).append(e)},$("body").eq(0).append('<div style="display:none">'+t+"</div>"),setTimeout(function(){document.write=i},1e4)}}catch(e){}if("pay"===this.action&&void 0!==this.pay&&null!==this.pay){if(0<this.pay.pay_link.length){var n=window.location.origin+window.location.pathname+(window.location.search?window.location.search+"&":"?")+"pay_id="+this.pay.pay_id+"&h="+this.pay.pay_hash;try{history.pushState(null,null,n),setTimeout(function(){flexbe_cli.events.emit("pay",{action:"init"})},200)}catch(e){setTimeout(function(){document.location=n},500)}}}else if("redirect"===this.action){var o=this.$form.find('input[name="action_redirect"]').val();0<o.length&&setTimeout(function(){flexbe_cli.modal.close(),document.location=o},500)}else{var a=this.$component.find("[data-modal-id]").attr("data-modal-id");if(!flexbe_cli.modal.find(a)){var s=String(this.ownerId);a=(s&&s.split("_")[0])+"_"+a}flexbe_cli.modal.find(a)?flexbe_cli.events.emit("modal_command",{command:"open",id:a}):console.warn("Modal open error:","There is no window attached to the form.",a)}},t.fileInput=function(){this.$component.on("change"+this.eventId,".file-input",function(e){var t=$(e.currentTarget),i=t.parents(".form_field_file_holder"),n=t.val(),o=e.currentTarget.files.length;if(i.addClass("active"),t.parents(".form_field").removeClass("is_error"),1===o&&i.find(".files_name_holder_text").text(n),1<o){var a,s=o%100,r=o%10,l=Math.floor(s/10);a=1===r&&11!==s?"form.filesMult":1<r&&r<5&&1!==l?"form.filesMult1":"form.filesMult2",i.find(".files_name_holder_text").text(o+" "+flexbe_cli.lang.get(a))}0===o&&i.removeClass("active")}),this.$component.on("click"+this.eventId,".clear_files",function(e){var t=$(e.currentTarget).parents(".form_field_file_holder");t.find(".file-input").val(""),t.removeClass("active")})},t.enterSubmit=function(){flexbe_cli.is_admin||$(window).on("keyup"+this.eventId,function(e){if(13==e.which){var t=$(".m_modal.show").eq(0);if(t.find(".form_field_textarea").is(":focus"))return!1;t.find("form").submit()}})},t.textResize=function(){this.$component.find(".autosize").each(function(e,t){var i=t.offsetHeight-t.clientHeight,n=$(t);n.removeAttr("data-autoresize"),n.off("keyup input").on("keyup input",function(e){e.currentTarget.style.height=e.currentTarget.scrollHeight+i+"px"})})},t.customSelect=function(){this.$component.find(".dropdown-container").remove(),this.$component.find("select.custom-select").each(function(e,t){var n=$(t),i=n.children("optgroup"),o=n.closest('[data-type="select"]'),s="",r="";i.length&&i.each(function(e,t){var i=$(t),n=i.attr("label");r+='<li class="optgroup">'+n+"</li>",i.children("option").each(function(e,t){var i=$(t),n=i.attr("value").replace(/"/g,"&quot;"),o=i.text()||"—",a=i.attr("selected");r+="selected"===a?'<li class="selected" data-value="'+n+'">'+(s=o)+"</li>":'<li data-value="'+n+'">'+o+"</li>"})}),n.children("option").each(function(e,t){var i=$(t),n=i.val().replace(/"/g,"&quot;"),o=i.text()||"—",a=i.attr("selected");r+="selected"===a?'<li class="selected" data-value="'+n+'">'+(s=o)+"</li>":'<li data-value="'+n+'">'+o+"</li>"});var a=$('<div class="dropdown-container">\n                        <div class="dropdown-select">\n                            <span>'+s+'</span>\n                        </div>\n                        <ul class="dropdown-select-ul">'+r+"</ul>\n                    </div>");n.after(a),a.off("click.selectdd").on("click.selectdd",".dropdown-select",function(){var e=a.hasClass("active");a.toggleClass("active",!e),o.toggleClass("active",!e),e||o.siblings('[data-type="select"]').removeClass("active").find(".dropdown-container").removeClass("active")}),a.off("click.selectli").on("click.selectli",".dropdown-select-ul li",function(e){var t=$(e.currentTarget);if(!t.hasClass("optgroup")){var i=t.closest("ul").siblings(".dropdown-select");a.toggleClass("active"),a.closest('[data-type="select"]').toggleClass("active"),t.siblings("li").removeClass("selected"),t.addClass("selected"),n.val(t.attr("data-value")),i.children("span").html(t.text())}})})},t.checkField=function(e){var t=e.type,i="checkbox"===t?e.checked:"file"===t?e.files:e.value,n=e.getAttribute("data-required")||!1,o=e.getAttribute("data-check")||!1,a=!(!n||i)&&"form.required";return e.getAttribute("data-mask")?!n&&!i||e.getAttribute("data-mask-complete")||(a="tel"===t&&i?"form.phone":"form.required"):o&&(i.length&&"email"===t?/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Zа-яёА-ЯЁ\-0-9]+\.)+[a-zA-Zа-яёА-ЯЁ]{2,}))$/.test(i)||(a="form.email"):i.length&&"tel"==t?/[^0-9+\(\)\-\s]/.test(i)?a="form.digits":i.replace(/[^0-9]/g,"").length<5&&(a="form.minlength"):"file"==t&&(a=!(!n||i.length)&&"form.required")),a&&flexbe_cli.lang.get(a)||!1},t.inputMask=function(){return"undefined"!=typeof IMask&&(this.needInitMasks=!1,this.$masked.each(function(e,t){flexbe_cli.components.classes.form.initMask(t)}),!0)},e}(BaseComponent);flexbe_cli.components.classes.form=e}(),function(){var e=function(a){function e(){for(var e,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];e=a.call.apply(a,[this].concat(i))||this;var o=i[0].core;return e.is="quiz",e.id=o.id,e.eventId="."+o.id,e.$quiz=null,e.current=0,e.total=0,e.hidePrevOnFirstStep=!!e.$component.data("hide-prev-on-firt"),e.textLoader=e.$component.data("text-loader"),e.outerModalId=4===flexbe_cli.theme_id&&"modal"===o.is&&o.id,e.swiper=[],e.createQuiz(o.$area),e}_inheritsLoose(e,a);var t=e.prototype;return t.onView=function(e){if(!e.state||this.isViewed||this.isBesided)return!1;this.init()},t.onBeside=function(e){if(!e.state||this.isViewed||this.isBesided)return!1;this.init()},t.onOpen=function(){this.inited&&this.toStep(1)},t.onInit=function(){this.$masked=this.$form.find("[data-mask]"),this.require=[],!flexbe_cli.is_admin&&this.$masked.length&&(this.needInitMasks=!0,this.require.push("/js/imask.min.js")),flexbe_cli.run.is_screen_all_mobile&&(this.needInitSwiper=this.$component.find(".form-field-image-group").length,this.needInitSwiper&&this.require.push("/js/swiper.v4.js"))},t.onLoad=function(){(this.isViewed||this.isBesided)&&(this.needInitSwiper&&this.initSwiper(this.current),this.needInitMasks&&this.inputMask()),this.isLoaded=!0},t.createQuiz=function(e){this.$area=e,this.$container=e.find(".quiz-container"),this.$quiz=e.find(".component-quiz"),this.$form=this.$quiz.find("form"),this.$steps=this.$quiz.find(".quiz-steps"),this.$stepsWrapper=this.$quiz.find(".steps-wrapper"),this.$progress=this.$quiz.find('[data-quiz-part="progress"]'),this.$progress[0]||(this.$progress=e.find('[data-quiz-part="progress"]')),this.hasWelcome=!!parseInt(this.$quiz.attr("data-welcome"),10),this.current=parseInt(this.$quiz.attr("data-active-step"),10)||0,this.total=parseInt(this.$quiz.attr("data-total-steps"),10)},t.init=function(){if(!this.inited){this.inited=!0,this.bindEvents(),this.customize(),this.control();var e=this.hasWelcome&&!this.outerModalId?0:1;this.toStep(this.$area.data("quiz-step")||e,!0)}},t.bindEvents=function(){var e=this;flexbe_cli.events.off("quiz_command").on("quiz_command",function(e,t){var i;flexbe_cli.components.instances[t.id]&&flexbe_cli.components.instances[t.id].forEach(function(e){"quiz"===e.is&&(i=e)}),i&&("start"===t.command?i.toStep(1):"step"===t.command&&i.toStep(t.step))}),this.$form.off(this.eventId),this.$form.on("input"+this.eventId+" change"+this.eventId,"input, textarea",function(e){var t=e.currentTarget,i=t.value,n=$(t);n.attr("value",i),n.closest(".field").removeClass("is_error")}),this.$form.on("submit"+this.eventId,function(){return!(e.busy||flexbe_cli.is_admin||e.current<=e.total||(e.busy=!0,flexbe_cli.stat.u_id&&e.addFields([{name:"f_uid",type:"hidden",value:flexbe_cli.stat.u_id}],!1),e.addFields([{name:"jsform",type:"hidden",value:parseInt(448312,10)}],!1),"undefined"!=typeof FormData?(e.sendFormdata(),1):e.$form.find('input[type="file"]').length<1&&(e.sendAjax(),1)))})},t.control=function(){var c=this;flexbe_cli.is_admin||($("body").off("keydown"+this.eventId).on("keydown"+this.eventId,function(e){if([9,13].includes(e.keyCode)){var t=flexbe_cli.block.hasOverlay||[],i=c.outerModalId&&"modal"===t[t.length-1],n=!c.outerModalId&&!t.length,o=c.inFocus&&(n||i),a=9===e.keyCode,s=13===e.keyCode,r=e.metaKey||e.ctrlKey,l=e.shiftKey;if(o&&(s||a)&&("TEXTAREA"!==e.target.tagName||!s||r))return l&&a?1<c.current&&c.toStep(c.current-1):c.current<=c.total&&c.toStep(c.current+1),e.preventDefault(),!1}}),this.$quiz.off("click.control").on("click.control","[data-quiz-action]",function(e){var t=$(e.currentTarget).data("quizAction"),i=c.current;"wellcome"===t?i=1:"next"===t?i+=1:"prev"===t?i-=1:"send"===t&&(i=c.total+1),c.toStep(i)}))},t.setProgress=function(){var e=this.$progress.find(".progress-loader-bar .current"),t=this.current,i=this.total,n=parseInt(100*t/i,10),o=e.data("unit");if(e.length&&o){var a=n+"%";"step"===o?a=t+" / "+i:"none"===o&&(a=""),e.attr("data-value",a)}this.$progress.attr("data-current",0<t?t:0),this.$progress.attr("data-current-progress",0<t?n:0),this.$progress.find(".progress-text .current").text(t),this.$progress.find(".progress-percent .current").text(n),this.$progress.find(".progress-loader-bar .current").css("width",n+"%"),this.$progress.find(".progress-loader-circle .current").attr("stroke-dashoffset",""+Math.abs(100-n))},t.toStep=function(e,t){var i=this;flexbe_cli.is_admin&&e>this.total&&(e=this.total);var n=this.hasWelcome&&e<=0,o=this.hasWelcome&&!this.outerModalId?0:1;if(void 0===e||e<o)e=o;else{if(!flexbe_cli.is_admin&&e>this.current&&!this.validateStep())return!1;if(e>this.total)return this.current=e,this.$form.submit(),!0}if(t&&this.$area.addClass("noanimate"),this.current=e,this.$area.data("quiz-step",e),this.$quiz.attr("data-active-step",e),this.$container.attr("data-active-step",e),this.$container.toggleClass("quiz-state-wellcome",n),this.$container.toggleClass("quiz-state-started",!n),this.setProgress(),n){if(this.outerModalId)flexbe_cli.modal.close(this.outerModalId);else if(this.$container.length){var a=this.$container.find('[data-quiz-part="'+(n?"wellcome":"done")+'"]').outerHeight()||0;this.$container.css("minHeight",a),this.$stepsWrapper.css("minHeight",""),flexbe_cli.run.is_ie&&flexbe_cli.block.fixCoverHeight(this.$area)}}else{var s=this.$steps.find('[data-step-id="'+e+'"]'),r=s.outerHeight(),l=!!s.find(".form-field-text-input").length;if(s.prevAll().removeClass("active next").addClass("prev"),s.nextAll().removeClass("active prev").addClass("next"),s.removeClass("next prev").addClass("active"),!flexbe_cli.is_admin&&!t){var c=s.find(".form-field-text input, .form-field-text textarea, .dropdown-select");c.length&&(c.focus(),setTimeout(function(){c.focus()},150))}this.$container.css("minHeight",r+"px"),this.$stepsWrapper.css("minHeight",r+"px"),flexbe_cli.run.is_ie&&this.$area.find(".cover").css("height","auto"),2===flexbe_cli.theme_id&&flexbe_cli.block.headers&&this.$area.find(".b_head").length&&flexbe_cli.block.headers.setHeaders(),setTimeout(function(){i.initSwiper(e),i.initSwiper(e+1),flexbe_cli.is_admin||flexbe_cli.run.is_mobile&&l||!i.alreadyStepped&&!i.hasWelcome?i.hasWelcome||(i.alreadyStepped=!0):(i.alreadyStepped=!0,!i.$area[0]._core||i.outerModalId||t||flexbe_cli.block.scrollTo(i.$area,!0,!0))},350)}return t&&setTimeout(function(){i.$area.removeClass("noanimate")},150),flexbe_cli.events.emit("quiz_event",{event:"to_step",sender:"core",quiz:this}),!0},t.validateStep=function(e){var o=this;e||(e=this.current);var a=!0;return this.$steps.find('[data-step-id="'+e+'"]').find("[data-type]").each(function(e,t){var i=$(t);i.removeClass("is_error");var n=o.checkField(i);n&&(i.outerWidth(),i.addClass("is_error"),i.find(".error").text(n),i.find("input, textarea").focus(),a=!1)}),a},t.checkField=function(e){var t,i=e.find("input, textarea, select").not('[type="hidden"]'),n=i[0],o=e[0],a=o.getAttribute("data-type"),s=[!0,1,"true","1"].includes(o.getAttribute("data-is-required")),r=n.getAttribute("data-check")||!1,l=n.getAttribute("data-mask")||!1;t=0<=["checkbox","radio","image"].indexOf(a)?!!i.closest(":checked").length:"file"===a?n.files:n.value;var c=!(!s||t)&&"form.required";return l?!s&&!t||n.getAttribute("data-mask-complete")||(c="phone"===a&&t?"form.phone":"form.required"):r&&(t.length&&"email"===a?/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Zа-яёА-ЯЁ\-0-9]+\.)+[a-zA-Zа-яёА-ЯЁ]{2,}))$/.test(t)||(c="form.email"):t.length&&"phone"==a?/[^0-9+\(\)\-\s]/.test(t)?c="form.digits":t.replace(/[^0-9]/g,"").length<5&&(c="form.minlength"):"file"==a&&(c=!(!s||t.length)&&"form.required")),c&&flexbe_cli.lang.get(c)||!1},t.customize=function(){this.customImageSelect(),this.customSelect(),this.customTextarea(),this.customFile(),this.needInitMasks&&this.isLoaded&&this.inputMask()},t.customImageSelect=function(){this.$quiz.find(".form-field-image-item").on("click",function(e){var t=$(e.currentTarget).find("input");t[0].checked=!t[0].checked})},t.customFile=function(){this.$quiz.on("change",".file-input",function(e){var t=$(e.currentTarget),i=t.parents(".form-field-file"),n=i.find(".form-field-file-files"),o=t.val(),a=e.currentTarget.files.length;if(i.addClass("active"),t.parents(".field").removeClass("is_error"),0===a)i.removeClass("active");else if(1===a)n.find(".text").text(o);else if(1<a){var s,r=a%10;s=1===r&&11!=a%100?"form.filesMult":1<r&&r<5?"form.filesMult1":"form.filesMult2",n.find(".text").text(a+" "+flexbe_cli.lang.get(s))}}),this.$quiz.off("click.clear-files").on("click.clear-files",".clear-files",function(e){var t=$(e.currentTarget).parents(".form-field-file");t.find(".file-input").val(""),t.removeClass("active")})},t.customSelect=function(){var f=this;this.$quiz.find(".dropdown-container").remove(),this.$quiz.find("select").each(function(e,t){var n=$(t),i=n.children("optgroup"),r=n.closest('[data-type="select"]'),s="",l="";i.length&&i.each(function(e,t){var i=$(t),n=i.attr("label");l+='<li class="optgroup">'+n+"</li>",i.children("option").each(function(e,t){var i=$(t),n=i.attr("value").replace(/"/g,"&quot;"),o=i.text()||"—",a=i.attr("selected");l+="selected"===a?'<li class="selected" data-value="'+n+'">'+(s=o)+"</li>":'<li data-value="'+n+'">'+o+"</li>"})}),n.children("option").each(function(e,t){var i=$(t),n=i.val().replace(/"/g,"&quot;"),o=i.text()||"—",a=i.attr("selected");l+="selected"===a?'<li class="selected" data-value="'+n+'">'+(s=o)+"</li>":'<li data-value="'+n+'">'+o+"</li>"});var c=$('<div class="dropdown-container">\n                    <div class="dropdown-select">\n                        <span>'+s+'</span>\n                        <i></i>\n                    </div>\n                    <ul class="dropdown-select-ul">'+l+"</ul>\n                </div>"),d=c.find(".dropdown-select-ul");n.after(c),c.off("click.selectdd").on("click.selectdd",".dropdown-select",function(){var e=f.$quiz.closest(".b_block"),t=e[0]._core,i=e.outerHeight()-60,n=d.outerHeight(),o=Math.min(i,n),a=c.offset().top,s=t.tween.end-30;s<a+o&&d.css({top:s-(a+o)+"px",maxHeight:o+"px"}),setTimeout(function(){var e=!c.hasClass("active");c.toggleClass("active",e),r.toggleClass("active",e),e&&$("body").on("click.quiz-select-element",function(e){$(e.target).is(c)||$(e.target).closest(c).length||(c.removeClass("active"),r.removeClass("active"),$("body").off("click.quiz-select-element"))})},50)}),c.off("click.selectli").on("click.selectli",".dropdown-select-ul li",function(e){var t=$(e.currentTarget);if(!t.hasClass("optgroup")){var i=t.closest("ul").siblings(".dropdown-select");c.removeClass("active"),r.removeClass("active"),t.siblings("li").removeClass("selected"),t.addClass("selected"),n.val(t.attr("data-value")),i.children("span").html(t.text())}})})},t.customTextarea=function(){this.$quiz.find("textarea.autosize").each(function(e,t){var i=t.offsetHeight-t.clientHeight,n=$(t);n.removeAttr("data-autoresize"),n.off("keyup input").on("keyup input",function(e){e.currentTarget.style.height="auto",e.currentTarget.style.height=e.currentTarget.scrollHeight+i+"px"})})},t.sendFormdata=function(){var t=this,e=new FormData(this.$form.get(0));if(e.append("is_ajax","true"),"undefined"!=typeof flexbeAPI&&void 0!==flexbeAPI.customLeadData&&e.append("customLeadData",JSON.stringify(flexbeAPI.customLeadData)),e.append("f_ab",JSON.stringify(flexbe_cli.stat.AB.getcookie())),flexbe_cli.run.is_OSX&&"function"==typeof e.entries){var i=e.entries(),n=Array.isArray(i),o=0;for(i=n?i:i[Symbol.iterator]();;){var a;if(n){if(o>=i.length)break;a=i[o++]}else{if((o=i.next()).done)break;a=o.value}var s=a,r=s[0],l=s[1];"object"===_typeof(l)&&l instanceof File&&0===l.size&&e.delete(r)}}this.$component.addClass("submitting"),this.$form.addClass("submitting"),$.ajax({url:this.$form.attr("action"),type:"POST",dataType:"json",processData:!1,contentType:!1,data:e,xhr:function(){var e=$.ajaxSettings.xhr();return e.upload,e}}).done(function(e){t.$component.addClass("success"),t.$component.removeClass("submitting"),t.$form.removeClass("submitting"),e.send_formdata=!0,void 0!==e.pay&&(t.pay=e.pay),t.afterSend(),setTimeout(function(){t.$component.removeClass("success")},1e3)}).fail(function(){t.$component.removeClass("submitting success"),t.$form.removeClass("submitting"),t.busy=!1})},t.sendAjax=function(){var t=this;this.$form.addClass("submitting");var e=this.$form.serialize();$.ajax({url:this.$form.attr("action"),type:"POST",dataType:"json",data:e+"&is_ajax=true"}).done(function(e){t.$form.removeClass("submitting"),e.send_ajax=!0,void 0!==e.pay&&(t.pay=e.pay),t.afterSend()}).fail(function(){t.$form.removeClass("submitting")})},t.afterSend=function(){var e=this,t=this.$form.find('input[name="action"]').val();flexbe_cli.stat.reach_goal("order_done");try{var i=this.$form.find('input[name="goal"]').val();void 0!==i&&""!==i&&flexbe_cli.stat.reach_goal(i)}catch(e){}try{var n=this.$form.find('textarea[name="goal_html"]').val();if("string"==typeof n&&n.trim()){var o=document.write;document.write=function(e){$("body").eq(0).append(e)},$("body").eq(0).append('<div style="display:none">'+n+"</div>"),setTimeout(function(){document.write=o},1e4)}}catch(e){}if("pay"===t&&void 0!==this.pay&&null!==this.pay&&0<this.pay.pay_link.length){var a=window.location.origin+window.location.pathname+(window.location.search?window.location.search+"&":"?")+"pay_id="+this.pay.pay_id+"&h="+this.pay.pay_hash;try{window.history.pushState(null,null,a),setTimeout(function(){flexbe_cli.events.emit("pay",{action:"init"})},200)}catch(e){setTimeout(function(){document.location=a},500)}}else if("redirect"===t){var s=this.$form.find('input[name="action_redirect"]').val();0<s.length&&setTimeout(function(){document.location=s},500)}else{var r=this.$component.find(".quiz-submit").attr("data-modal-id");if(!flexbe_cli.modal.find(r)){var l=String(this.ownerId);r=(l&&l.split("_")[0])+"_"+r}flexbe_cli.modal.find(r)?flexbe_cli.events.emit("modal_command",{command:"open",id:r}):console.warn("Modal open error:","There is no window attached to the form.",r)}setTimeout(function(){e.busy=!1,e.resetForm(),e.toStep(0)},1e3)},t.resetForm=function(){this.$form.get(0).reset(),this.$form.find(".form-field-file, .file-input-outer").removeClass("active"),this.$form.find(".step-fields input:not(:hidden)").each(function(e,t){t.value=null,t.checked=!1,t.removeAttribute("value"),t.removeAttribute("checked"),t.removeAttribute("data-mask-complete"),t._mask&&t._mask.updateValue()})},t.addFields=function(e,t){void 0===t&&(t=!0);var i=this.$quiz.find(".form-fields-advanced");e.length&&i[0]&&(t&&i.empty(),e.forEach(function(e){i.find('input[name="'+e.name+'"]').remove();var t=$("<input>").attr("type",e.type).attr("name",e.name).attr("value",e.value);i.append(t)}))},t.initSwiper=function(e){if(!flexbe_cli.run.is_screen_all_mobile||!this.isLoaded)return!1;var t=this.$component.find('[data-step-id="'+e+'"] .quiz-slider-outer');t.length&&!this.swiper[e]&&(this.swiper[e]=new Swiper(t.eq(0),{init:!1,speed:450,slidesPerView:"auto",freeMode:!0,spaceBetween:0,slideToClickedSlide:!0,threshold:10,autoHeight:!1,preventClicks:!0,touchMoveStopPropagation:!1,preventClicksPropagation:!0,preventInteractionOnTransition:!0,wrapperClass:"form-field-image-group",slideClass:"form-field-image-item",noSwipingClass:"redactor-box"}),this.swiper[e].init())},t.inputMask=function(){return"undefined"!=typeof IMask&&(this.needInitMasks=!1,this.$masked.each(function(e,t){flexbe_cli.components.classes.form.initMask(t)}),!0)},e}(BaseComponent);flexbe_cli.components.classes.quiz=e}(),function(){var e=function(o){function e(){for(var e,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return(e=o.call.apply(o,[this].concat(i))||this).is="timer",e}_inheritsLoose(e,o);var t=e.prototype;return t.onInit=function(){this.$timer=this.$component.find(".timer"),this.data=this.$timer.data("time"),this.initTimer()},t.initTimer=function(){var e=this.$timer,t=this.data,i=new Date;if("date"===t.type){var n=t.my?String(t.my).replace(".","/").split("/"):[1,2018];this.finalDate=new Date(n[1],parseInt(n[0],10)-1,t.d,t.h,t.m)}else if("monthly"===t.type)this.finalDate=new Date(i.getFullYear(),i.getMonth(),t.d,t.h,t.m),i.getTime()>this.finalDate.getTime()&&(this.finalDate=new Date(i.getFullYear(),i.getMonth()+1,t.d,t.h,t.m)),parseInt(t.d,10)!=this.finalDate.getDate()&&(this.finalDate.setDate(0),i.getTime()>this.finalDate.getTime()&&(this.finalDate=new Date(this.finalDate.getFullYear(),this.finalDate.getMonth()+2,0,t.h,t.m)));else if("weekly"===t.type){var o=parseInt(i.getDate(),10)-parseInt(i.getDay(),10)+parseInt(t.dw,10);this.finalDate=new Date(i.getFullYear(),i.getMonth(),o,t.h,t.m),i.getTime()>this.finalDate.getTime()&&this.finalDate.setDate(this.finalDate.getDate()+7)}else"daily"===t.type?(this.finalDate=new Date(i.getFullYear(),i.getMonth(),i.getDate(),t.h,t.m),i.getTime()>this.finalDate.getTime()&&this.finalDate.setDate(this.finalDate.getDate()+1)):(this.finalDate=new Date,this.finalDate.setMonth(this.finalDate.getMonth()+1,15));this.$itemDay1=e.find(".d [data-value]").eq(0),this.$itemDay2=e.find(".d [data-value]").eq(1),this.$itemDay3=e.find(".d [data-value]").eq(2),this.$itemHour1=e.find(".h [data-value]").eq(0),this.$itemHour2=e.find(".h [data-value]").eq(1),this.$itemMinute1=e.find(".m [data-value]").eq(0),this.$itemMinute2=e.find(".m [data-value]").eq(1),this.$itemSecond1=e.find(".s [data-value]").eq(0),this.$itemSecond2=e.find(".s [data-value]").eq(1),this.lastOffset={d:void 0,h:void 0,m:void 0,s:void 0},!flexbe_cli.is_admin&&"none"!==this.data.on_expired&&this.finalDate.getTime()<i.getTime()?"element"===this.data.on_expired?$(this.owner).hide():$(this.root).hide():this.start()},t.tick=function(){if(this.secondLeft=this.finalDate.getTime()-(new Date).getTime(),this.secondLeft=Math.ceil(this.secondLeft/1e3),this.secondLeft=this.secondLeft<0?0:this.secondLeft,this.offset={d:Math.floor(this.secondLeft/60/60/24),h:Math.floor(this.secondLeft/60/60)%24,m:Math.floor(this.secondLeft/60)%60,s:this.secondLeft%60},this.lastOffset.d!==this.offset.d){var e=this.offset.d.toString().split("");e.length<2&&e.unshift(0),e.length<3&&e.unshift(0),this.$itemDay1.attr("data-value",e[0]).text(e[0]),this.$itemDay2.attr("data-value",e[1]).text(e[1]),this.$itemDay3.attr("data-value",e[2]).text(e[2])}if(this.lastOffset.h!==this.offset.h){var t=this.offset.h.toString().split("");t.length<2&&t.unshift(0),this.$itemHour1.attr("data-value",t[0]).text(t[0]),this.$itemHour2.attr("data-value",t[1]).text(t[1])}if(this.lastOffset.m!==this.offset.m){var i=this.offset.m.toString().split("");i.length<2&&i.unshift(0),this.$itemMinute1.attr("data-value",i[0]).text(i[0]),this.$itemMinute2.attr("data-value",i[1]).text(i[1])}if(this.lastOffset.s!==this.offset.s){var n=this.offset.s.toString().split("");n.length<2&&n.unshift(0),this.$itemSecond1.attr("data-value",n[0]).text(n[0]),this.$itemSecond2.attr("data-value",n[1]).text(n[1])}this.lastOffset=this.offset,this.secondLeft<0&&this.stop()},t.start=function(){var e=this;this.tick(),clearInterval(this.interval),this.interval=setInterval(function(){e.tick()},200)},t.stop=function(){clearInterval(this.interval)},e}(BaseComponent);flexbe_cli.components.classes.timer=e}(),function(){var s={};flexbe_cli.block={hasOverlay:[],$list:!1,get $blocks(){return this.$list&&this.$list.find(".b_block")},init:function(){var t=this;this.$list=$(" header, .container-list, footer"),this.$blocks.toArray().forEach(function(e){return t.bind(e,{},"init")}),this.dispathEvents()},dispathEvents:function(){var n=this;$(window).on("documentresize.flexbe_block",function(){n.checkSizes()}),$(window).on("resized.flexbe_block orientationchange.flexbe_block",function(){n.checkSizes(),n.fixCoverHeight()}),$(window).on("load.flexbe_block",function(){if(/^#/.test(location.hash)){var e=String(location.hash).replace(/^#{1,2}/,""),t=n.$list.find(".b_"+e+', .b_block ._anchor[name="'+e+'"]').eq(0);t&&n.scrollTo(t.closest(".b_block"))}}),flexbe_cli.is_admin&&(flexbe_cli.events.on("block_render.flexbe_block block_change.flexbe_block",function(e,t){if(t&&t.id&&(/render/.test(e.type)||t.name&&!t.templateRendered&&!t.styleRendered)){var i=$('[data-id="'+t.id+'"]',n.$list)[0];n.bind(i,t,"render")}}),flexbe_cli.events.on("block_resize",function(e,t){if(t&&t.id){var i=document.querySelector('[data-id="'+t.id+'"]');n.bind(i,t,"resize")}}),flexbe_cli.events.on("client_msg.flexbe_block",function(e,t){if(t&&t.id&&"block"===t.is){var i=$('[data-id="'+t.id+'"]',n.$list)[0];n.bind(i,t,"message")}}),flexbe_cli.events.off("layout_change.flexbe_block").on("layout_change.flexbe_block",$.debounce(function(e,t){t&&"block"!==!t.is&&(n.updateTweens(),n.fixCoverHeight())},100)))},pushOverlay:function(e,t){return t&&this.hasOverlay.includes(e)&&this.hasOverlay.splice(this.hasOverlay.indexOf(e)),this.hasOverlay.push(e),!0},removeOverlay:function(e){return this.hasOverlay.includes(e)&&this.hasOverlay.splice(this.hasOverlay.indexOf(e)),!0},updateTweens:function(){this.$blocks.each(function(e,t){t._core&&t._core._tween()})},checkSizes:function(){var t=this;this.$blocks.toArray().forEach(function(e){return t.bind(e,{},"resize")})},scrollTo:function(e,t,i){if(void 0===t&&(t=!0),void 0===i&&(i=!1),e=("object"!==_typeof(e)?$('.b_block[data-id="'+e+'"]',this.$list).eq(0):$(e))[0]){var n,o=e,a=o.offsetTop,s=o.offsetHeight,r=flexbe_cli.resize.height-s;t&&s<flexbe_cli.resize.height?(n=a-r/2,r<180&&flexbe_cli.run.is_screen_pc&&$('[data-b-type*="header"][data-b-type*="floating"]').length&&(n-=80)):n=i&&s>flexbe_cli.resize.height?a+(s-flexbe_cli.resize.height)/2:a,$("body, html").animate({scrollTop:n})}},fixCoverHeight:function(e){void 0===e&&(e=this.$list.find(".b_block")),e.each(function(e,t){var i=$(t),n=i.find(".cover");if(n.length){var o=0,a=flexbe_cli.resize.height;if([2,3].includes(flexbe_cli.theme_id)){var s,r=i.prevAll(".b_block");s=(s=flexbe_cli.is_admin&&i.is('[data-abtest-variant="b"]')?r.eq(1):r.eq(0)).filter('[data-b-type*="header"]').not('[data-b-type*="overflow"]'),o=Math.max(0,s.outerHeight()||0)}var l=a-o;n.css("min-height",l+"px"),flexbe_cli.run.is_ie&&l>=n.outerHeight()&&n.css("height","1px")}})},bind:function(e,t,i){if(void 0===t&&(t={}),!e)return!1;var n=e.getAttribute("data-b-id"),o=e._core;if(!o){var a=s[n]||{};o=new BlockCore(e,a),e._core=o,i&&!["message"].includes(i)||o.init(t)}return["init","render"].includes(i)?o.init(t):"resize"===i?o._onResize(t):"message"===i&&o._onMsg(t.msg,t.data),{core:o}},register:function(e,t){void 0===t&&(t={}),e||console.warn("Element register error: Element must have templateId"),s[e]=t}}}(),function(){var s={};flexbe_cli.modal={opened:{},init:function(){var t=this;this.list=document.querySelector(".modal-list"),this.$list=$(this.list),this.$list.find(".m_modal").toArray().forEach(function(e){return t.bind(e,{},"init")});var e=getJsonFromUrl();if(e.service&&e.m_id)return this.$list.addClass("noanimate"),this.open(e.m_id),!1;this.popstate(),this.dispathEvents()},dispathEvents:function(){var n=this;flexbe_cli.events.on("modal_render.flexbe_modal modal_change.flexbe_modal",function(e,t){if(t&&t.id&&(/render/.test(e.type)||t.name&&!t.templateRendered&&!t.styleRendered)){var i=(n.find(t.id)||{}).modal;n.bind(i,t,"render")}}),flexbe_cli.events.on("client_msg.flexbe_modal",function(e,t){if(t&&t.id&&"modal"===t.is){var i=(n.find(t.id)||{}).modal;n.bind(i,t,"message")}}),flexbe_cli.events.on("modal_command.flexbe_modal",function(e,t){if(t)switch(t.command){case"open":n.open(t.id,t.data);break;case"close":n.close(t.id)}}),$("body").on("click.modal-close",".m_modal .close",function(e){e.preventDefault(),e.stopPropagation();var t=$(e.currentTarget).closest(".m_modal").data("id");n.close(t)}),flexbe_cli.is_admin||$("body").off("click.modal-close-overlay").on("click.modal-close-overlay",".modal-data",function(e){if(!flexbe_cli.run.is_mobile&&Object.keys(n.opened).length&&($(e.target).is(".modal-data")||$(e.target).is('[data-overlay="true"]'))){var t=$(".m_modal.show").eq(0).attr("data-id");n.close(t)}}),flexbe_cli.is_admin||$(window).off("keyup.modal-close-esc").on("keyup.modal-close-esc",function(e){if(27!==e.keyCode)return!0;var t=$(".m_modal.show").eq(0).attr("data-id");n.close(t)})},popstate:function(){var i=this;if(flexbe_cli.is_admin||flexbe_cli.lockPopstate)return!1;setTimeout(function(){if(/^#{1,2}/.test(location.hash)&&location.hash.replace(/^#{1,2}/,"")){var e=location.hash.replace(/^#{1,2}/,""),t=i.$list.find('._anchor[name="'+e+'"], .m_modal[data-id="'+e+'"]').closest(".m_modal").attr("data-id");i.opened[t]||i.open(t)}else i.close()},50)},find:function(e){var t=this.$list.find('[data-id="'+e+'"]').toArray(),i=t[0]||!1;return!!i&&{modals:t,modal:i}},open:function(e,t,i){if(void 0===t&&(t={}),void 0===i&&(i={}),!e)return!1;var n=this.find(e)||{},o=n.modals,a=n.modal,s=$(o);if(1<s.length){var r=i.multivar;if(!r){var l=String(e).split("_")[0];r=$('[data-id="'+l+'"]').attr("data-multivar")}var c=[];r&&"default"!==r&&(c=s.filter('[data-multivar="'+r+'"]').eq(0)),a=(s=c.length?c.eq(0):s.eq(0))[0]}var d=(a&&this.bind(a)||{}).core;return d?(this.close(null,e),d.open(t,i),this.opened[e]=d,!0):(console.warn("Try to open modal without core object,","id: "+e+",","modal: ",a),!1)},close:function(e,t){var i=this;if(!e)return Object.keys(this.opened).map(function(e){if(i.opened[e]&&e!=t)return i.close(e,t)});if(!this.opened[e])return!1;delete this.opened[e];var n=(this.find(e)||{}).modal,o=(n&&this.bind(n)||{}).core;return o?(o.close({from:t}),!0):(console.warn("Try to close modal without core object"),!1)},bind:function(e,t,i){if(void 0===t&&(t={}),!e)return!1;var n=e.getAttribute("data-m-id"),o=e._core;if(!o){var a=s[n]||{};o=new ModalCore(e,a),e._core=o,["init","render"].includes(i)||o.init(t)}return["init","render"].includes(i)?o.init(t):"message"===i&&o._onMsg(t.msg,t.data),{core:o}},register:function(e,t){void 0===t&&(t={}),e||console.warn("Element register error: Element must have templateId"),s[e]=t}}}(),function(){var s={};flexbe_cli.widget={init:function(){var t=this;this.$list=$(".widget-list"),this.list=this.$list.get(0),this.$list.find(".w_widget").toArray().forEach(function(e){return t.bind(e,{},"init")}),this.dispathEvents()},dispathEvents:function(){var n=this;flexbe_cli.events.on("widget_render.flexbe_widget widget_change.flexbe_widget",function(e,t){if(t&&t.id&&(/render/.test(e.type)||t.name&&!t.templateRendered&&!t.styleRendered)){var i=$('[data-id="'+t.id+'"]',n.$list)[0];n.bind(i,t,"render")}}),flexbe_cli.events.on("client_msg.flexbe_widget",function(e,t){if(t&&t.id&&"widget"===t.is){var i=n.list.querySelector('[data-id="'+t.id+'"]');n.bind(i,t,"message")}})},bind:function(e,t,i){if(void 0===t&&(t={}),!e)return!1;var n=e.getAttribute("data-w-id"),o=e._core;if(!o){var a=s[n]||{};o=new WidgetCore(e,a),e._core=o,["init","render"].includes(i)||o.init(t)}return["init","render"].includes(i)?o.init(t):"message"===i&&o._onMsg(t.msg,t.data),{core:o}},register:function(e,t){void 0===t&&(t={}),e||console.warn("Element register error: Element must have templateId"),s[e]=t}}}(),flexbe_cli.menu={anchors:[],floating:!1,offset:0,init:function(){this.createMobileMenu(),this.floatingMenu()},floatingMenu:function(){if(!flexbe_cli.is_admin&&!this.floating){var i=[];if((i=$("[data-floating=true]").eq(0))[0]){var n,o=i.parents(".b_block").last()[0]._core,a=i.outerHeight(),s=parseInt(i.attr("data-floating-type"),10)||1;this.floating=o.id,i.siblings(".fixer").height(a),flexbe_cli.run.is_screen_mobile||flexbe_cli.run.is_screen_tablet_s?(i=$(".mobile-menu .menu-burger"),s=1):i=i.add(".mobile-menu .menu-burger"),function e(){var t;requestAnimationFrame(e),t=(o&&o.tween?o.tween.position:window.pageYOffset/(a/2))>=l,r!==t&&(r=t,i.off("transitionend"),t?(i.addClass("floating"),clearTimeout(n),n=setTimeout(function(){i.addClass("animate show")},50)):1===s?(i.removeClass("show"),i.one("transitionend",function(){i.removeClass("animate floating")})):i.removeClass("show animate floating"))}();var r=!1,l=.02;1===s&&(l=(o&&o.tween&&o.tween.height)<200?2:1)}}},createMobileMenu:function(){if(!flexbe_cli.adaptive||99===flexbe_cli.theme_id)return!1;var e=$(".b_block:not(.hidden) .menu-burger");if(!this.$mobileMenu&&(this.$mobileMenu=$('<div class="mobile-menu">\n                        <div class="menu-burger">\n                            <span class="menu"><i></i><i></i><i></i></span>\n                        </div>\n                        <div class="menu-wrapper">\n                            <div class="overlay"></div>\n                            <div class="menu-content">\n                                <div class="scroll-wrap">\n                                    <div class="logo-holder"></div>\n                                    <div class="menu-holder"></div>\n                                    <div class="text-holder"></div>\n                                    <div class="socials-holder"></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>').appendTo("body"),e[0])){var t=e.eq(0).closest(".b_block").data("bId"),i=e.eq(0).closest(".b_block").data("id");e.not(":first").remove(),this.$mobileMenu.attr("data-id",i).attr("data-b-id",t)}var a=this.$mobileMenu.find(".logo-holder"),s=this.$mobileMenu.find(".menu-holder"),r=this.$mobileMenu.find(".text-holder"),l=this.$mobileMenu.find(".socials-holder");function c(e,t){var i=d(e),s=i.url,r=i.search,l=i.hash,c=0;return t.find("a").each(function(e,t){var i=d(t.href),n=i.url,o=i.hash,a=i.search;n===s&&a===r&&o===l&&(c+=1)}),!c}function d(e){var t=String(e).trim().replace(/http(?:s)?:\/\//,"//").split("?"),i=(t[0]||"").replace(/^\.\//,"").replace(/\/$/,""),n=(t[1]||"").split("#"),o=n[0],a=n[1];return i&&location.host+location.pathname!==i.replace(/^\/\//,"")||(i="./"),{url:i,search:o,hash:a}}$(".b_block").not(".hidden").find('[data-role="mobile-menu"]').each(function(e,t){$(t).find("[data-role]").each(function(e,t){var i,n,o=$(t);switch(o.attr("data-role")){case"logo":n=o,a.contents().length||a.html(n.contents());break;case"text":i=o,r.contents().length||r.html(i.contents());break;case"menu":!function(e){s.contents().length||(s.append(e.clone().contents()),s.find("li").remove());var n=s.find("ul");e.find("a[href]").each(function(e,t){if(c(t.href,n)){var i=$(t).closest("li");n.append(i)}})}(o);break;case"socials":!function(e){if(l.contents().length){var i=l.find(".socials-wrap");e.find("a[href]").each(function(e,t){c($(t).attr("href"),i)&&i.append(t)})}else l.append(e.contents())}(o)}})}),s.find(".component-menu").removeAttr("data-style"),this.toggleMobileMenu()},toggleMobileMenu:function(){var t,i=$("body > .mobile-menu").eq(0);function n(e){clearTimeout(t),t=setTimeout(function(){$("body").toggleClass("overflow fixed",e),i.toggleClass("show",e).off("click.mobile-menu-close"),e&&i.on("click.mobile-menu-close",function(e){var t=$(e.target);(2===flexbe_cli.theme_id&&t.is(".overlay")||3===flexbe_cli.theme_id&&!t.closest(".menu-holder").length)&&n(!1)})},100)}$(".menu-burger").off("click.mobile-menu-toggle").on("click.mobile-menu-toggle",function(){n(!i.hasClass("show"))}),i.on("close",function(){n(!1)}),i.on("open",function(){n(!0)})}},flexbe_cli.init=function(){flexbe_cli.run.init(),flexbe_cli.events.init(),flexbe_cli.lib.init(),flexbe_cli.lang.init(),flexbe_cli.stat.init(),flexbe_cli.scroll.init(),flexbe_cli.resize.init(),flexbe_cli.components.init(),flexbe_cli.block.init(),flexbe_cli.modal.init(),flexbe_cli.widget.init(),flexbe_cli.menu.init()},flexbe_cli._init();
//# sourceMappingURL=maps/_core.js.map
